<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Biopsy Needle: /home/redtrek/NTM/ntm_needle_biopsy/code/biopsy_needle/src/include/config.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Smart Biopsy Needle<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">This project focuses on the electronics implementation for the University of Florida Nontraditional Manufacturing Lab&#39;s aspiration-assisted biopsy needle.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">config.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This holds the macros for I2C device addresses, general debug and timing values, control abstractions, and ADC power calculations.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="config_8h__dep__incl.png" border="0" usemap="#a_2home_2redtrek_2NTM_2ntm__needle__biopsy_2code_2biopsy__needle_2src_2include_2config_8hdep" alt=""/></div>
</div>
</div>
<p><a href="config_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7dfa2c4cfbfcba36416046052e7943e8" id="r_a7dfa2c4cfbfcba36416046052e7943e8"><td class="memItemLeft" align="right" valign="top"><a id="a7dfa2c4cfbfcba36416046052e7943e8" name="a7dfa2c4cfbfcba36416046052e7943e8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OLED_ADDR</b>&#160;&#160;&#160;0x3C</td></tr>
<tr class="separator:a7dfa2c4cfbfcba36416046052e7943e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1339fa84c70a1e0606d8d3362c993ee" id="r_ac1339fa84c70a1e0606d8d3362c993ee"><td class="memItemLeft" align="right" valign="top"><a id="ac1339fa84c70a1e0606d8d3362c993ee" name="ac1339fa84c70a1e0606d8d3362c993ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INA219_ADDR</b>&#160;&#160;&#160;0x40</td></tr>
<tr class="separator:ac1339fa84c70a1e0606d8d3362c993ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8af39ec9ea4179e1236663f82e6be92" id="r_ab8af39ec9ea4179e1236663f82e6be92"><td class="memItemLeft" align="right" valign="top"><a id="ab8af39ec9ea4179e1236663f82e6be92" name="ab8af39ec9ea4179e1236663f82e6be92"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FX29_ADDR</b>&#160;&#160;&#160;0x28</td></tr>
<tr class="separator:ab8af39ec9ea4179e1236663f82e6be92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0427c5ee0151d36a621ea2bbbcc33b80" id="r_a0427c5ee0151d36a621ea2bbbcc33b80"><td class="memItemLeft" align="right" valign="top"><a id="a0427c5ee0151d36a621ea2bbbcc33b80" name="a0427c5ee0151d36a621ea2bbbcc33b80"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>debounce_us</b>&#160;&#160;&#160;100000</td></tr>
<tr class="separator:a0427c5ee0151d36a621ea2bbbcc33b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6f3299722b682ead61165a15c392922" id="r_ac6f3299722b682ead61165a15c392922"><td class="memItemLeft" align="right" valign="top"><a id="ac6f3299722b682ead61165a15c392922" name="ac6f3299722b682ead61165a15c392922"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>hold_us</b>&#160;&#160;&#160;3000000</td></tr>
<tr class="memdesc:ac6f3299722b682ead61165a15c392922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hold [STATE] for 3 sec to enter ZERO state. <br /></td></tr>
<tr class="separator:ac6f3299722b682ead61165a15c392922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10c5e664055ed80b487406ea89b6e72" id="r_ac10c5e664055ed80b487406ea89b6e72"><td class="memItemLeft" align="right" valign="top"><a id="ac10c5e664055ed80b487406ea89b6e72" name="ac10c5e664055ed80b487406ea89b6e72"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>potIterations</b>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:ac10c5e664055ed80b487406ea89b6e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e34bd94f3ba8465de287a9663c24b80" id="r_a7e34bd94f3ba8465de287a9663c24b80"><td class="memItemLeft" align="right" valign="top"><a id="a7e34bd94f3ba8465de287a9663c24b80" name="a7e34bd94f3ba8465de287a9663c24b80"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>debug_us</b>&#160;&#160;&#160;5000000</td></tr>
<tr class="separator:a7e34bd94f3ba8465de287a9663c24b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce5aaf1a0caf368eaf0db8926a30960" id="r_afce5aaf1a0caf368eaf0db8926a30960"><td class="memItemLeft" align="right" valign="top"><a id="afce5aaf1a0caf368eaf0db8926a30960" name="afce5aaf1a0caf368eaf0db8926a30960"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPIKE_TIME</b>&#160;&#160;&#160;500</td></tr>
<tr class="memdesc:afce5aaf1a0caf368eaf0db8926a30960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time in ms used to avoid measuring current spikes during the ZERO state. Without this the ZERO state will exit immediately as it will detect motor startup spikes as collision with the housing. <br /></td></tr>
<tr class="separator:afce5aaf1a0caf368eaf0db8926a30960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1923668201fdaeaced6d7935492b1a1f" id="r_a1923668201fdaeaced6d7935492b1a1f"><td class="memItemLeft" align="right" valign="top"><a id="a1923668201fdaeaced6d7935492b1a1f" name="a1923668201fdaeaced6d7935492b1a1f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CUTOFF_STALL</b>&#160;&#160;&#160;800.0f</td></tr>
<tr class="memdesc:a1923668201fdaeaced6d7935492b1a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stall current that determines when the ZERO state is complete. If the device detects this current, it will be because it has reached the housing. <br /></td></tr>
<tr class="separator:a1923668201fdaeaced6d7935492b1a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7217e715c077650b39f693d8fbfa57d0" id="r_ga7217e715c077650b39f693d8fbfa57d0"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOTOR_FW</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga7217e715c077650b39f693d8fbfa57d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd813818c5b56e7356a571c562b922fb" id="r_gabd813818c5b56e7356a571c562b922fb"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOTOR_BW</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gabd813818c5b56e7356a571c562b922fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3249ae087e43a52e0182917edca0dc12" id="r_ga3249ae087e43a52e0182917edca0dc12"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOTOR_ON</b>&#160;&#160;&#160;255</td></tr>
<tr class="memdesc:ga3249ae087e43a52e0182917edca0dc12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum PWM value for motor. <br /></td></tr>
<tr class="separator:ga3249ae087e43a52e0182917edca0dc12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1b1c6c44e1e025f7a748396b2e6f9f4" id="r_gad1b1c6c44e1e025f7a748396b2e6f9f4"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MOTOR_OFF</b>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gad1b1c6c44e1e025f7a748396b2e6f9f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum PWM value for motor. <br /></td></tr>
<tr class="separator:gad1b1c6c44e1e025f7a748396b2e6f9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24c290b5fa8c0bb248fc15b5bcf873d7" id="r_ga24c290b5fa8c0bb248fc15b5bcf873d7"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NTM_MAX</b>(A,  B)&#160;&#160;&#160;((A) &gt;= (B) ? (A) : (B))</td></tr>
<tr class="memdesc:ga24c290b5fa8c0bb248fc15b5bcf873d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the bigger value between A and B using operator. Essentially: if (A) &gt;= (B) return A. Else return B. <br /></td></tr>
<tr class="separator:ga24c290b5fa8c0bb248fc15b5bcf873d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a187ecf82734a12819e1283bcb69bab" id="r_ga9a187ecf82734a12819e1283bcb69bab"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NTM_MIN</b>(A,  B)&#160;&#160;&#160;((A) &lt;= (B) ? (A) : (B))</td></tr>
<tr class="memdesc:ga9a187ecf82734a12819e1283bcb69bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the smaller value between A and B using operator. Essentially: if (A) &lt;= (B) return A. Else return B. <br /></td></tr>
<tr class="separator:ga9a187ecf82734a12819e1283bcb69bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7703a5d829fb6d1223ad111a9474fa9b" id="r_ga7703a5d829fb6d1223ad111a9474fa9b"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BAT_MAX_ADC</b>&#160;&#160;&#160;((int)(0.5 + (4095/3.3) * (4.2/2)))</td></tr>
<tr class="memdesc:ga7703a5d829fb6d1223ad111a9474fa9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents the battery's max capacity from the perspective of the microcontroller. This code maps the battery's voltage to the ADC module value. The battery's "maximum charge" is 4.2 V which is too much for the pins to handle so we halve it using a voltage divider. Therefore, when the battery is at maximum the microcontroller pin recieves 2.1 V. We then map this to the 12 bit ADC value. There are 12 bits to represent the voltage so 4096 corresponding values (inclusive of 0) with a maximum of 3.3 V recievable by the pin. When we multiply these to values together we are figuring out what the ADC value of the battery is at maximum charge (4.2 V / 2) 0.5 is just a value to round this result to the nearest whole integer. <br /></td></tr>
<tr class="separator:ga7703a5d829fb6d1223ad111a9474fa9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad380f4a571d5444566336f067dfb7b01" id="r_gad380f4a571d5444566336f067dfb7b01"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BAT_MIN_ADC</b>&#160;&#160;&#160;((int)(0.5 + (4095/3.3) * (3.2/2)))</td></tr>
<tr class="memdesc:gad380f4a571d5444566336f067dfb7b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents the battery's min capacity from the perspective of the microcontroller. This code maps the battery's voltage to the ADC module value. The battery's "minimum charge" is 3.2 V. To be consistent with what we did for the maximum voltage we halve it using a voltage divider. Therefore, when the battery is at maximum the microcontroller pin recieves 1.6 V. We then map this to the 12 bit ADC value. There are 12 bits to represent the voltage so 4096 corresponding values (inclusive of 0) with a maximum of 3.3 V recievable by the pin. When we multiply these to values together we are figuring out what the ADC value of the battery is at maximum charge (3.2 V / 2) 0.5 is just a value to round this result to the nearest whole integer. <br /></td></tr>
<tr class="separator:gad380f4a571d5444566336f067dfb7b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ea44361cc7ac80f146feb2806720fda" id="r_ga4ea44361cc7ac80f146feb2806720fda"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BAT_ADC_PER</b>&#160;&#160;&#160;(100.0 / (<a class="el" href="group__BatteryMacros.html#ga7703a5d829fb6d1223ad111a9474fa9b">BAT_MAX_ADC</a> - <a class="el" href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a>))</td></tr>
<tr class="memdesc:ga4ea44361cc7ac80f146feb2806720fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks strange out of context. Used to calculate the batter capacity i.e. (Current Battery Value - BAT_MIN_ADC) * BAT_ADC_PER = % Capacity. <br /></td></tr>
<tr class="separator:ga4ea44361cc7ac80f146feb2806720fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81b58a672e9a97383f06a46f89660b1d" id="r_ga81b58a672e9a97383f06a46f89660b1d"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEC_US</b>&#160;&#160;&#160;1000000</td></tr>
<tr class="memdesc:ga81b58a672e9a97383f06a46f89660b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">1 Second in microseconds. <br /></td></tr>
<tr class="separator:ga81b58a672e9a97383f06a46f89660b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This holds the macros for I2C device addresses, general debug and timing values, control abstractions, and ADC power calculations. </p>
<dl class="section author"><dt>Author</dt><dd>Thomas Chang </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-05-06</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
