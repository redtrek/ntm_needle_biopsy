<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Biopsy Needle: /home/redtrek/NTM/ntm_needle_biopsy/code/biopsy_needle/src/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Smart Biopsy Needle<span id="projectnumber">&#160;v1.0</span>
   </div>
   <div id="projectbrief">The smart biopsy needle is a aspiration-assisted motor-driven device intended for cancer diagnostic research in the Nontraditional Manufacturing Lab of the University of Florida.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is the main file for the smart biopsy needle. It handles the high level operation of the state machine, sensors, motors, and display. If onboarding, LOOK AT THIS FILE FIRST. Close all pragma regions and just try to understand the main function.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ntm__helpers_8h_source.html">include/ntm_helpers.h</a>&quot;</code><br />
<code>#include &quot;../libs/INA219/INA219.h&quot;</code><br />
<code>#include &quot;../libs/SSD1306/ssd1306.h&quot;</code><br />
<code>#include &quot;../libs/FX29/fx29.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#a_2home_2redtrek_2NTM_2ntm__needle__biopsy_2code_2biopsy__needle_2src_2main_8cpp" alt=""/></div>
<map name="a_2home_2redtrek_2NTM_2ntm__needle__biopsy_2code_2biopsy__needle_2src_2main_8cpp" id="a_2home_2redtrek_2NTM_2ntm__needle__biopsy_2code_2biopsy__needle_2src_2main_8cpp">
<area shape="rect" title="This is the main file for the smart biopsy needle. It handles the high level operation of the state m..." alt="" coords="1803,5,2009,60"/>
<area shape="rect" href="ntm__helpers_8h.html" title="This file holds the prototypes for smart needle&#39;s helper functions." alt="" coords="1528,108,1695,133"/>
<area shape="poly" title=" " alt="" coords="1817,63,1664,107,1663,102,1815,58"/>
<area shape="rect" title=" " alt="" coords="1719,108,1890,133"/>
<area shape="poly" title=" " alt="" coords="1877,62,1830,101,1827,97,1873,58"/>
<area shape="rect" title=" " alt="" coords="1914,108,2103,133"/>
<area shape="poly" title=" " alt="" coords="1939,58,1986,97,1983,101,1936,62"/>
<area shape="rect" title=" " alt="" coords="2127,108,2266,133"/>
<area shape="poly" title=" " alt="" coords="1996,58,2146,102,2144,107,1994,63"/>
<area shape="rect" href="pins_8h.html" title="This file handles the pin definitions for the device dependent on the selected platform (PCB or Bread..." alt="" coords="718,189,779,214"/>
<area shape="poly" title=" " alt="" coords="1528,132,793,199,793,193,1528,127"/>
<area shape="rect" title=" " alt="" coords="1093,269,1194,295"/>
<area shape="poly" title=" " alt="" coords="1528,129,1442,135,1348,146,1264,162,1231,172,1207,184,1189,199,1174,218,1154,258,1149,255,1170,215,1185,195,1205,179,1229,167,1263,157,1347,141,1441,130,1528,123"/>
<area shape="rect" title=" " alt="" coords="1219,269,1289,295"/>
<area shape="poly" title=" " alt="" coords="1528,125,1442,129,1351,139,1271,156,1242,168,1223,183,1215,200,1217,219,1226,239,1237,257,1233,259,1221,241,1212,220,1210,199,1219,180,1239,164,1270,151,1350,133,1442,124,1528,120"/>
<area shape="rect" href="config_8h.html" title="This holds the macros for I2C device addresses, general debug and timing values, control abstractions..." alt="" coords="1232,189,1305,214"/>
<area shape="poly" title=" " alt="" coords="1539,136,1434,156,1319,184,1310,187,1308,181,1317,179,1433,151,1538,131"/>
<area shape="rect" title=" " alt="" coords="1330,189,1410,214"/>
<area shape="poly" title=" " alt="" coords="1574,136,1423,184,1415,186,1413,181,1421,179,1573,131"/>
<area shape="rect" title=" " alt="" coords="1434,189,1493,214"/>
<area shape="poly" title=" " alt="" coords="1591,136,1499,184,1496,180,1588,131"/>
<area shape="rect" title=" " alt="" coords="1517,189,1583,214"/>
<area shape="poly" title=" " alt="" coords="1604,135,1569,180,1565,176,1600,132"/>
<area shape="rect" title=" " alt="" coords="1607,181,1738,221"/>
<area shape="poly" title=" " alt="" coords="1622,132,1651,169,1647,172,1618,135"/>
<area shape="rect" title=" " alt="" coords="1762,189,1861,214"/>
<area shape="poly" title=" " alt="" coords="1641,131,1770,181,1768,186,1639,136"/>
<area shape="rect" title=" " alt="" coords="1885,189,1951,214"/>
<area shape="poly" title=" " alt="" coords="1676,131,1770,151,1873,179,1880,181,1879,186,1872,184,1768,156,1674,136"/>
<area shape="rect" title=" " alt="" coords="1975,189,2018,214"/>
<area shape="poly" title=" " alt="" coords="1695,130,1844,152,1914,166,1964,179,1968,180,1966,185,1963,184,1913,171,1844,158,1694,135"/>
<area shape="rect" title=" " alt="" coords="2042,189,2141,214"/>
<area shape="poly" title=" " alt="" coords="1695,130,1878,154,2031,179,2045,182,2043,187,2029,184,1877,159,1694,135"/>
<area shape="rect" title=" " alt="" coords="2165,189,2228,214"/>
<area shape="poly" title=" " alt="" coords="1695,129,1708,131,1833,141,1932,144,2030,153,2153,179,2161,181,2160,186,2152,184,2029,158,1932,150,1833,146,1707,136,1695,135"/>
<area shape="rect" href="tusb__config_8h_source.html" title=" " alt="" coords="2252,189,2360,214"/>
<area shape="poly" title=" " alt="" coords="1695,129,1708,131,1858,142,1975,148,2092,156,2241,179,2258,182,2257,188,2240,184,2092,162,1975,153,1857,148,1707,136,1695,135"/>
<area shape="rect" title=" " alt="" coords="170,269,293,295"/>
<area shape="poly" title=" " alt="" coords="718,210,307,272,306,266,718,205"/>
<area shape="rect" title=" " alt="" coords="317,269,447,295"/>
<area shape="poly" title=" " alt="" coords="718,212,449,269,448,264,717,207"/>
<area shape="rect" title=" " alt="" coords="472,269,588,295"/>
<area shape="poly" title=" " alt="" coords="719,216,576,267,574,262,717,211"/>
<area shape="rect" title=" " alt="" coords="613,269,738,295"/>
<area shape="poly" title=" " alt="" coords="740,216,698,261,694,257,736,212"/>
<area shape="rect" title=" " alt="" coords="763,269,881,295"/>
<area shape="poly" title=" " alt="" coords="761,212,804,257,800,261,758,216"/>
<area shape="rect" title=" " alt="" coords="906,269,1069,295"/>
<area shape="poly" title=" " alt="" coords="780,210,941,263,939,268,779,215"/>
<area shape="rect" title=" " alt="" coords="5,269,145,295"/>
<area shape="poly" title=" " alt="" coords="718,209,159,272,159,267,718,203"/>
<area shape="poly" title=" " alt="" coords="780,206,1080,265,1079,271,779,211"/>
<area shape="poly" title=" " alt="" coords="780,204,957,227,1206,267,1205,272,956,232,780,209"/>
</map>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6af9f0d27369b3f4a063f61c51c198f3" id="r_a6af9f0d27369b3f4a063f61c51c198f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a6af9f0d27369b3f4a063f61c51c198f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Window size for Moving Average Filter.  <br /></td></tr>
<tr class="separator:a6af9f0d27369b3f4a063f61c51c198f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9400840ebc875d8e59c484e65a643b77" id="r_a9400840ebc875d8e59c484e65a643b77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>&#160;&#160;&#160;0.1f</td></tr>
<tr class="memdesc:a9400840ebc875d8e59c484e65a643b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smoothing factor for LP Filter.  <br /></td></tr>
<tr class="separator:a9400840ebc875d8e59c484e65a643b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa19be6305a5a4485e1e70de70ed7d677" id="r_aa19be6305a5a4485e1e70de70ed7d677"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>states</b> { <br />
&#160;&#160;<b>WAIT</b>
, <b>STANDBY</b>
, <b>CUTTING</b>
, <b>REMOVAL</b>
, <br />
&#160;&#160;<b>EXITING</b>
, <b>FINISH</b>
, <b>ZERO</b>
<br />
 }</td></tr>
<tr class="separator:aa19be6305a5a4485e1e70de70ed7d677"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c50659733df2acac1580d209db8e97f" id="r_a8c50659733df2acac1580d209db8e97f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8c50659733df2acac1580d209db8e97f">oled_init</a> ()</td></tr>
<tr class="memdesc:a8c50659733df2acac1580d209db8e97f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the 128x64 OLED display and communication via I2C connections.  <br /></td></tr>
<tr class="separator:a8c50659733df2acac1580d209db8e97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77605eb86157d0b0194fc72a25738a22" id="r_a77605eb86157d0b0194fc72a25738a22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a77605eb86157d0b0194fc72a25738a22">displayInputSpeed</a> (int y_pos)</td></tr>
<tr class="memdesc:a77605eb86157d0b0194fc72a25738a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function used to abstract how potentiometer input information is shown on the OLED screen.  <br /></td></tr>
<tr class="separator:a77605eb86157d0b0194fc72a25738a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea220abd9e6d180734b3b2bc0750f89" id="r_a9ea220abd9e6d180734b3b2bc0750f89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a> (int y_pos)</td></tr>
<tr class="memdesc:a9ea220abd9e6d180734b3b2bc0750f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function used to display calculated battery capacity value on OLED.  <br /></td></tr>
<tr class="separator:a9ea220abd9e6d180734b3b2bc0750f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59ebf0340587075ef7d1fc943c78408" id="r_ac59ebf0340587075ef7d1fc943c78408"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a> ()</td></tr>
<tr class="memdesc:ac59ebf0340587075ef7d1fc943c78408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the order of information, titles, and instructions shown on the OLED display by state in FSM.  <br /></td></tr>
<tr class="separator:ac59ebf0340587075ef7d1fc943c78408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c42980e08859e81090559d51a512b0" id="r_ac7c42980e08859e81090559d51a512b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac7c42980e08859e81090559d51a512b0">handleButton</a> ()</td></tr>
<tr class="separator:ac7c42980e08859e81090559d51a512b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e93a7266c27d56845381cb2076d391" id="r_ae2e93a7266c27d56845381cb2076d391"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae2e93a7266c27d56845381cb2076d391">handleRelease</a> ()</td></tr>
<tr class="separator:ae2e93a7266c27d56845381cb2076d391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acf41dad5576bfc9ced017baa2bf524" id="r_a4acf41dad5576bfc9ced017baa2bf524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4acf41dad5576bfc9ced017baa2bf524">handleMSCButton</a> ()</td></tr>
<tr class="separator:a4acf41dad5576bfc9ced017baa2bf524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab132489f70371e1c876ba54e9d7011" id="r_a5ab132489f70371e1c876ba54e9d7011"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5ab132489f70371e1c876ba54e9d7011">createDataFile</a> ()</td></tr>
<tr class="memdesc:a5ab132489f70371e1c876ba54e9d7011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates/writes datalog to the microSD via FatFS implementation. Writes the header of the file if successful and names the file by order of creation.  <br /></td></tr>
<tr class="separator:a5ab132489f70371e1c876ba54e9d7011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e37f59651692a7089d2b8ed312c7d3" id="r_af7e37f59651692a7089d2b8ed312c7d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af7e37f59651692a7089d2b8ed312c7d3">resetFiltering</a> ()</td></tr>
<tr class="separator:af7e37f59651692a7089d2b8ed312c7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b5f26e2ea4e4c247dc26ea786e9b11" id="r_a14b5f26e2ea4e4c247dc26ea786e9b11"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a14b5f26e2ea4e4c247dc26ea786e9b11">getBatLevel</a> ()</td></tr>
<tr class="memdesc:a14b5f26e2ea4e4c247dc26ea786e9b11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the current capacity of the battery using predetermined minimum and maximum charge values.  <br /></td></tr>
<tr class="separator:a14b5f26e2ea4e4c247dc26ea786e9b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70ff0abbdc7d6bd7b82553d2037889fd" id="r_a70ff0abbdc7d6bd7b82553d2037889fd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a> ()</td></tr>
<tr class="memdesc:a70ff0abbdc7d6bd7b82553d2037889fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the percentage power represented by the inputted ADC value from the potentiometer.  <br /></td></tr>
<tr class="separator:a70ff0abbdc7d6bd7b82553d2037889fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e74d3c55ba6d356cd90823775f2d664" id="r_a5e74d3c55ba6d356cd90823775f2d664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5e74d3c55ba6d356cd90823775f2d664">getRPM</a> ()</td></tr>
<tr class="memdesc:a5e74d3c55ba6d356cd90823775f2d664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses a 1 second timer to extrapolate the revolutions per minute.  <br /></td></tr>
<tr class="separator:a5e74d3c55ba6d356cd90823775f2d664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b614e0add50e5ae36d208fe910f90c6" id="r_a0b614e0add50e5ae36d208fe910f90c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0b614e0add50e5ae36d208fe910f90c6">enableMSC</a> ()</td></tr>
<tr class="separator:a0b614e0add50e5ae36d208fe910f90c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae995a6024db644fcec928354bc4f5f67" id="r_ae995a6024db644fcec928354bc4f5f67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae995a6024db644fcec928354bc4f5f67">disableMSC</a> ()</td></tr>
<tr class="separator:ae995a6024db644fcec928354bc4f5f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64461563174d034ff94d443f2c172622" id="r_a64461563174d034ff94d443f2c172622"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a64461563174d034ff94d443f2c172622">testingSuite</a> ()</td></tr>
<tr class="separator:a64461563174d034ff94d443f2c172622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4765141d8281f1873714923a260f93fc" id="r_a4765141d8281f1873714923a260f93fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4765141d8281f1873714923a260f93fc">testMSC</a> ()</td></tr>
<tr class="separator:a4765141d8281f1873714923a260f93fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada5a15c76153823533f203632f7d1d62" id="r_ada5a15c76153823533f203632f7d1d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ada5a15c76153823533f203632f7d1d62">testSD</a> ()</td></tr>
<tr class="separator:ada5a15c76153823533f203632f7d1d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ec483eb29785695a1b3b255b3dc8b9" id="r_a68ec483eb29785695a1b3b255b3dc8b9"><td class="memItemLeft" align="right" valign="top"><a id="a68ec483eb29785695a1b3b255b3dc8b9" name="a68ec483eb29785695a1b3b255b3dc8b9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>testPins</b> ()</td></tr>
<tr class="separator:a68ec483eb29785695a1b3b255b3dc8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70581e416f69b14c5a0bc5e4918b479" id="r_af70581e416f69b14c5a0bc5e4918b479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af70581e416f69b14c5a0bc5e4918b479">gpio_ISR</a> (uint gpio, uint32_t events)</td></tr>
<tr class="separator:af70581e416f69b14c5a0bc5e4918b479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a92c826e08ae550b58a56ea3f55c49311" id="r_a92c826e08ae550b58a56ea3f55c49311"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a> = 50</td></tr>
<tr class="memdesc:a92c826e08ae550b58a56ea3f55c49311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1)  <br /></td></tr>
<tr class="separator:a92c826e08ae550b58a56ea3f55c49311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5988591b58aabf7567019b975da7e7aa" id="r_a5988591b58aabf7567019b975da7e7aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a> = 0</td></tr>
<tr class="memdesc:a5988591b58aabf7567019b975da7e7aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1)  <br /></td></tr>
<tr class="separator:a5988591b58aabf7567019b975da7e7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03de839a9debec4f2265023b765444ad" id="r_a03de839a9debec4f2265023b765444ad"><td class="memItemLeft" align="right" valign="top">ssd1306_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a03de839a9debec4f2265023b765444ad">oled</a></td></tr>
<tr class="separator:a03de839a9debec4f2265023b765444ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fef9435f436bfd601806a7a0bef54bb" id="r_a1fef9435f436bfd601806a7a0bef54bb"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a1fef9435f436bfd601806a7a0bef54bb">speed_lvl</a> = 0</td></tr>
<tr class="separator:a1fef9435f436bfd601806a7a0bef54bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04968100075345ffc60b9ffe62b4c9c" id="r_af04968100075345ffc60b9ffe62b4c9c"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af04968100075345ffc60b9ffe62b4c9c">temp_speed</a> = 0</td></tr>
<tr class="separator:af04968100075345ffc60b9ffe62b4c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2ce6f76284e4e63fab85506c67907b" id="r_a3e2ce6f76284e4e63fab85506c67907b"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a3e2ce6f76284e4e63fab85506c67907b">bat_per</a> = 0</td></tr>
<tr class="separator:a3e2ce6f76284e4e63fab85506c67907b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43c3812e6d13e0518d9f8b8f463ffcf" id="r_ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 0</td></tr>
<tr class="separator:ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6f130727d2275823bd3040581e801a5" id="r_ac6f130727d2275823bd3040581e801a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac6f130727d2275823bd3040581e801a5">numPulses</a> = 0</td></tr>
<tr class="separator:ac6f130727d2275823bd3040581e801a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f37897ed52586bce688beb5be8f50e" id="r_ae1f37897ed52586bce688beb5be8f50e"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae1f37897ed52586bce688beb5be8f50e">now</a> = get_absolute_time()</td></tr>
<tr class="separator:ae1f37897ed52586bce688beb5be8f50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597777ddfcfc40b6553d91789dfd343f" id="r_a597777ddfcfc40b6553d91789dfd343f"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a597777ddfcfc40b6553d91789dfd343f">prevTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a597777ddfcfc40b6553d91789dfd343f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a5c46842ef8862d2ccd9e7bd3aec63" id="r_ad5a5c46842ef8862d2ccd9e7bd3aec63"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5a5c46842ef8862d2ccd9e7bd3aec63">pressTime</a> = get_absolute_time()</td></tr>
<tr class="separator:ad5a5c46842ef8862d2ccd9e7bd3aec63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029fea14c173ec8d34f33c8594b95db0" id="r_a029fea14c173ec8d34f33c8594b95db0"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a029fea14c173ec8d34f33c8594b95db0">pressedTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a029fea14c173ec8d34f33c8594b95db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6564e8259eebddb283f25451cd7fd364" id="r_a6564e8259eebddb283f25451cd7fd364"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6564e8259eebddb283f25451cd7fd364">mscPressTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a6564e8259eebddb283f25451cd7fd364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e39b399c2a11f0d76e42ab8241a910" id="r_a25e39b399c2a11f0d76e42ab8241a910"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a25e39b399c2a11f0d76e42ab8241a910">rpm</a> = 0</td></tr>
<tr class="separator:a25e39b399c2a11f0d76e42ab8241a910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d2f7d0c2e8d8f3a6428b8225202ea3" id="r_aa7d2f7d0c2e8d8f3a6428b8225202ea3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aa7d2f7d0c2e8d8f3a6428b8225202ea3">current_mA</a> = 0</td></tr>
<tr class="separator:aa7d2f7d0c2e8d8f3a6428b8225202ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0952eff2667e5af2b307ba4f6d0b06b" id="r_ad0952eff2667e5af2b307ba4f6d0b06b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad0952eff2667e5af2b307ba4f6d0b06b">force</a> = 0</td></tr>
<tr class="separator:ad0952eff2667e5af2b307ba4f6d0b06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d4a56445e448ecc3a9c7143fe0c832" id="r_a23d4a56445e448ecc3a9c7143fe0c832"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a23d4a56445e448ecc3a9c7143fe0c832">displacement</a> = 0</td></tr>
<tr class="separator:a23d4a56445e448ecc3a9c7143fe0c832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f7a9c2f3b2608343ddf46bcfcac2c2" id="r_ad5f7a9c2f3b2608343ddf46bcfcac2c2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5f7a9c2f3b2608343ddf46bcfcac2c2">lp_current</a> = 0</td></tr>
<tr class="separator:ad5f7a9c2f3b2608343ddf46bcfcac2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37794ae42b6a8116fa24f997b634dba9" id="r_a37794ae42b6a8116fa24f997b634dba9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a37794ae42b6a8116fa24f997b634dba9">MAF</a> [<a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>] = {0}</td></tr>
<tr class="separator:a37794ae42b6a8116fa24f997b634dba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a891ae364a9c7853fd67cdb10cfc870c8" id="r_a891ae364a9c7853fd67cdb10cfc870c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a891ae364a9c7853fd67cdb10cfc870c8">MAF_counter</a> = 0</td></tr>
<tr class="separator:a891ae364a9c7853fd67cdb10cfc870c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef72076a36ad8bc9405e594d784e040b" id="r_aef72076a36ad8bc9405e594d784e040b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aef72076a36ad8bc9405e594d784e040b">MAF_sum</a> = 0</td></tr>
<tr class="separator:aef72076a36ad8bc9405e594d784e040b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7597a58fd0a9415759b81dffee974e6" id="r_ac7597a58fd0a9415759b81dffee974e6"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a></td></tr>
<tr class="memdesc:ac7597a58fd0a9415759b81dffee974e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global slice value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to the organization of PWM configurations by clock. Please see RP2040 documentation.  <br /></td></tr>
<tr class="separator:ac7597a58fd0a9415759b81dffee974e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23777d4d3d69af11916d27e48261cfb1" id="r_a23777d4d3d69af11916d27e48261cfb1"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a></td></tr>
<tr class="memdesc:a23777d4d3d69af11916d27e48261cfb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global channel value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to PWM output pin itself. Please see RP2040 documentation.  <br /></td></tr>
<tr class="separator:a23777d4d3d69af11916d27e48261cfb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0799c2e54cccc1be7e9b4a1a9fa780c" id="r_ac0799c2e54cccc1be7e9b4a1a9fa780c"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac0799c2e54cccc1be7e9b4a1a9fa780c">prevBug</a> = get_absolute_time()</td></tr>
<tr class="separator:ac0799c2e54cccc1be7e9b4a1a9fa780c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21215ef0aca60874669e1e2f7425e70c" id="r_a21215ef0aca60874669e1e2f7425e70c"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a21215ef0aca60874669e1e2f7425e70c">currBug</a> = get_absolute_time()</td></tr>
<tr class="separator:a21215ef0aca60874669e1e2f7425e70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d24a7e8ef01eb2683901eb25396beed" id="r_a0d24a7e8ef01eb2683901eb25396beed"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0d24a7e8ef01eb2683901eb25396beed">motor_flag</a> = false</td></tr>
<tr class="separator:a0d24a7e8ef01eb2683901eb25396beed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae964ac24618b7c245998d37cdd06acd3" id="r_ae964ac24618b7c245998d37cdd06acd3"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae964ac24618b7c245998d37cdd06acd3">button_press_flag</a> = false</td></tr>
<tr class="separator:ae964ac24618b7c245998d37cdd06acd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a548278ea37054952a50f6ef9ce6413ce" id="r_a548278ea37054952a50f6ef9ce6413ce"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a548278ea37054952a50f6ef9ce6413ce">button_release_flag</a> = false</td></tr>
<tr class="separator:a548278ea37054952a50f6ef9ce6413ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268172ec6be901b1e9c5f4212cee806b" id="r_a268172ec6be901b1e9c5f4212cee806b"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a268172ec6be901b1e9c5f4212cee806b">button_msc_flag</a> = false</td></tr>
<tr class="separator:a268172ec6be901b1e9c5f4212cee806b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5af4859884ea5c925366abfbdb0ef8f" id="r_ad5af4859884ea5c925366abfbdb0ef8f"><td class="memItemLeft" align="right" valign="top">FATFS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5af4859884ea5c925366abfbdb0ef8f">filesys</a></td></tr>
<tr class="separator:ad5af4859884ea5c925366abfbdb0ef8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be63952e3c9cb0f46f9e592b3c78714" id="r_a4be63952e3c9cb0f46f9e592b3c78714"><td class="memItemLeft" align="right" valign="top">FIL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4be63952e3c9cb0f46f9e592b3c78714">fil</a></td></tr>
<tr class="separator:a4be63952e3c9cb0f46f9e592b3c78714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e3ee7820c8f54b680f492ef5c0d1ed" id="r_ab1e3ee7820c8f54b680f492ef5c0d1ed"><td class="memItemLeft" align="right" valign="top">TCHAR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ab1e3ee7820c8f54b680f492ef5c0d1ed">filename</a> [20] = &quot;data0.csv\0&quot;</td></tr>
<tr class="separator:ab1e3ee7820c8f54b680f492ef5c0d1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434ef2e67e7d14c2f6a753c08a5eae49" id="r_a434ef2e67e7d14c2f6a753c08a5eae49"><td class="memItemLeft" align="right" valign="top">enum states state&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a434ef2e67e7d14c2f6a753c08a5eae49">nextState</a></td></tr>
<tr class="separator:a434ef2e67e7d14c2f6a753c08a5eae49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd9653a1b3ee09644723877d2aa36e1" id="r_accd9653a1b3ee09644723877d2aa36e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#accd9653a1b3ee09644723877d2aa36e1">validPress</a> = false</td></tr>
<tr class="separator:accd9653a1b3ee09644723877d2aa36e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main file for the smart biopsy needle. It handles the high level operation of the state machine, sensors, motors, and display. If onboarding, LOOK AT THIS FILE FIRST. Close all pragma regions and just try to understand the main function. </p>
<dl class="section author"><dt>Author</dt><dd>Thomas Chang </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-04-30</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9400840ebc875d8e59c484e65a643b77" name="a9400840ebc875d8e59c484e65a643b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9400840ebc875d8e59c484e65a643b77">&#9670;&#160;</a></span>LP_ALPHA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LP_ALPHA&#160;&#160;&#160;0.1f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Smoothing factor for LP Filter. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00025">25</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a6af9f0d27369b3f4a063f61c51c198f3" name="a6af9f0d27369b3f4a063f61c51c198f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af9f0d27369b3f4a063f61c51c198f3">&#9670;&#160;</a></span>MAF_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAF_SZ&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Window size for Moving Average Filter. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00024">24</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa19be6305a5a4485e1e70de70ed7d677" name="aa19be6305a5a4485e1e70de70ed7d677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa19be6305a5a4485e1e70de70ed7d677">&#9670;&#160;</a></span>states</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum states</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00100">100</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>            {</div>
<div class="line"><span class="lineno">  101</span>    WAIT,</div>
<div class="line"><span class="lineno">  102</span>    STANDBY,</div>
<div class="line"><span class="lineno">  103</span>    CUTTING,</div>
<div class="line"><span class="lineno">  104</span>    REMOVAL,</div>
<div class="line"><span class="lineno">  105</span>    EXITING,</div>
<div class="line"><span class="lineno">  106</span>    FINISH,</div>
<div class="line"><span class="lineno">  107</span>    ZERO</div>
<div class="line"><span class="lineno">  108</span>};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5ab132489f70371e1c876ba54e9d7011" name="a5ab132489f70371e1c876ba54e9d7011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ab132489f70371e1c876ba54e9d7011">&#9670;&#160;</a></span>createDataFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createDataFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates/writes datalog to the microSD via FatFS implementation. Writes the header of the file if successful and names the file by order of creation. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00322">322</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  322</span>                      {</div>
<div class="line"><span class="lineno">  323</span>    </div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordtype">int</span> fileNum = 0;</div>
<div class="line"><span class="lineno">  325</span>    FRESULT file_created = f_open(&amp;fil, filename, FA_CREATE_NEW | FA_WRITE);</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">while</span> (file_created == FR_EXIST) {</div>
<div class="line"><span class="lineno">  327</span>        fileNum++;</div>
<div class="line"><span class="lineno">  328</span>        sprintf(filename, <span class="stringliteral">&quot;data%d.csv&quot;</span>, fileNum);</div>
<div class="line"><span class="lineno">  329</span>        file_created = f_open(&amp;fil, filename, FA_CREATE_NEW | FA_WRITE);</div>
<div class="line"><span class="lineno">  330</span>    }</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="comment">// Print header of file</span></div>
<div class="line"><span class="lineno">  333</span>    f_printf(&amp;fil, <span class="stringliteral">&quot;State, Time(ms), Current(mA), CurrentLP(mA), CurrentMAF(mA), RPM, Displacement(mm), Force(N)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  334</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae995a6024db644fcec928354bc4f5f67" name="ae995a6024db644fcec928354bc4f5f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae995a6024db644fcec928354bc4f5f67">&#9670;&#160;</a></span>disableMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00542">542</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  542</span>                  {</div>
<div class="line"><span class="lineno">  543</span>    tud_disconnect();</div>
<div class="line"><span class="lineno">  544</span>    f_mount(&amp;filesys, <span class="stringliteral">&quot;&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  545</span>    tud_deinit(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  546</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ea220abd9e6d180734b3b2bc0750f89" name="a9ea220abd9e6d180734b3b2bc0750f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea220abd9e6d180734b3b2bc0750f89">&#9670;&#160;</a></span>displayBat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayBat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function used to display calculated battery capacity value on OLED. </p>
<p>When below the 0 threshold, will display LO on the screen. Automatically adjusts depending on if 3 digits are required. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">y_pos</td><td>The y position in pixels (bottom left) of where the text is written. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00408">408</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>                           {</div>
<div class="line"><span class="lineno">  409</span>    std::string temp = to_string(bat_per) + <span class="stringliteral">&quot;%&quot;</span>;</div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordtype">int</span> x_pos = 110;</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">if</span> (bat_per == 0) {</div>
<div class="line"><span class="lineno">  412</span>        ssd1306_draw_string(&amp;oled, 110, y_pos, 1, <span class="stringliteral">&quot;BAT&quot;</span>);</div>
<div class="line"><span class="lineno">  413</span>        ssd1306_draw_string(&amp;oled, 116, y_pos + 8, 1, <span class="stringliteral">&quot;LO&quot;</span>);</div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  415</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bat_per &lt; 10) {</div>
<div class="line"><span class="lineno">  416</span>        x_pos = 116;</div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="line"><span class="lineno">  418</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* bat = temp.c_str();</div>
<div class="line"><span class="lineno">  419</span>    ssd1306_draw_string(&amp;oled, 110, y_pos, 1, <span class="stringliteral">&quot;BAT&quot;</span>);</div>
<div class="line"><span class="lineno">  420</span>    ssd1306_draw_string(&amp;oled, x_pos, y_pos + 8, 1, bat);</div>
<div class="line"><span class="lineno">  421</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a77605eb86157d0b0194fc72a25738a22" name="a77605eb86157d0b0194fc72a25738a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77605eb86157d0b0194fc72a25738a22">&#9670;&#160;</a></span>displayInputSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayInputSpeed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function used to abstract how potentiometer input information is shown on the OLED screen. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">y_pos</td><td>The y position in pixels (bottom left) of where the text is written. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00341">341</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  341</span>                                  {</div>
<div class="line"><span class="lineno">  342</span>    std::string temp = <span class="stringliteral">&quot;INPUT SPEED: [ &quot;</span> + to_string(temp_speed) + <span class="stringliteral">&quot;% ]&quot;</span>;</div>
<div class="line"><span class="lineno">  343</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* in_speed = temp.c_str();</div>
<div class="line"><span class="lineno">  344</span>    ssd1306_draw_string(&amp;oled, 0, y_pos, 1, in_speed);</div>
<div class="line"><span class="lineno">  345</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac59ebf0340587075ef7d1fc943c78408" name="ac59ebf0340587075ef7d1fc943c78408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59ebf0340587075ef7d1fc943c78408">&#9670;&#160;</a></span>displayState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the order of information, titles, and instructions shown on the OLED display by state in FSM. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00351">351</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  351</span>                    {</div>
<div class="line"><span class="lineno">  352</span>    ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">switch</span>(state) {</div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordflow">case</span> STANDBY:</div>
<div class="line"><span class="lineno">  355</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;STANDBY&quot;</span>);</div>
<div class="line"><span class="lineno">  356</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span>                ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ PRESS MSC  : LOGS ]&quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  359</span>                <a class="code hl_function" href="main_8cpp.html#a77605eb86157d0b0194fc72a25738a22">displayInputSpeed</a>(50);</div>
<div class="line"><span class="lineno">  360</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  361</span>            </div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">case</span> CUTTING:</div>
<div class="line"><span class="lineno">  363</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;CUTTING&quot;</span>);</div>
<div class="line"><span class="lineno">  364</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  365</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  366</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, rpm, <span class="stringliteral">&quot;SPD (RPM) : &quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 40, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  368</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 50, force, <span class="stringliteral">&quot;FRC (N)   : &quot;</span>);</div>
<div class="line"><span class="lineno">  369</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  370</span>            </div>
<div class="line"><span class="lineno">  371</span>            <span class="keywordflow">case</span> REMOVAL:</div>
<div class="line"><span class="lineno">  372</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;REMOVAL&quot;</span>);</div>
<div class="line"><span class="lineno">  373</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  374</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>                <a class="code hl_function" href="main_8cpp.html#a77605eb86157d0b0194fc72a25738a22">displayInputSpeed</a>(50);</div>
<div class="line"><span class="lineno">  376</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  377</span>            </div>
<div class="line"><span class="lineno">  378</span>            <span class="keywordflow">case</span> EXITING:</div>
<div class="line"><span class="lineno">  379</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;EXITING&quot;</span>);</div>
<div class="line"><span class="lineno">  380</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  381</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  382</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, rpm, <span class="stringliteral">&quot;SPD (RPM) : &quot;</span>);</div>
<div class="line"><span class="lineno">  383</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 40, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  384</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 50, force, <span class="stringliteral">&quot;FRC (N)   : &quot;</span>);</div>
<div class="line"><span class="lineno">  385</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  386</span>            </div>
<div class="line"><span class="lineno">  387</span>            <span class="keywordflow">case</span> FINISH: <span class="comment">// For debugging purposes.</span></div>
<div class="line"><span class="lineno">  388</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;COMPLETE&quot;</span>);</div>
<div class="line"><span class="lineno">  389</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  390</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  391</span>                ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ PRESS MSC  : LOGS ]&quot;</span>);</div>
<div class="line"><span class="lineno">  392</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  393</span>            <span class="keywordflow">case</span> ZERO:</div>
<div class="line"><span class="lineno">  394</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;ZERO&quot;</span>);</div>
<div class="line"><span class="lineno">  395</span>                <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  396</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;Resetting to origin&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  398</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  399</span>        }</div>
<div class="line"><span class="lineno">  400</span>    ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  401</span>}</div>
<div class="ttc" id="amain_8cpp_html_a77605eb86157d0b0194fc72a25738a22"><div class="ttname"><a href="main_8cpp.html#a77605eb86157d0b0194fc72a25738a22">displayInputSpeed</a></div><div class="ttdeci">void displayInputSpeed(int y_pos)</div><div class="ttdoc">Helper function used to abstract how potentiometer input information is shown on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00341">main.cpp:341</a></div></div>
<div class="ttc" id="amain_8cpp_html_a9ea220abd9e6d180734b3b2bc0750f89"><div class="ttname"><a href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a></div><div class="ttdeci">void displayBat(int y_pos)</div><div class="ttdoc">Helper function used to display calculated battery capacity value on OLED.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00408">main.cpp:408</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a42ebef78c974c5dd10ee53b6bea5ac07"><div class="ttname"><a href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a></div><div class="ttdeci">void displayData(ssd1306_t *screen, int y_pos, float data, std::string info)</div><div class="ttdoc">Helper function used to abstract how sensor data is shown on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00072">ntm_helpers.cpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b614e0add50e5ae36d208fe910f90c6" name="a0b614e0add50e5ae36d208fe910f90c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b614e0add50e5ae36d208fe910f90c6">&#9670;&#160;</a></span>enableMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00537">537</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  537</span>                 {</div>
<div class="line"><span class="lineno">  538</span>    f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  539</span>    tud_task();</div>
<div class="line"><span class="lineno">  540</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14b5f26e2ea4e4c247dc26ea786e9b11" name="a14b5f26e2ea4e4c247dc26ea786e9b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b5f26e2ea4e4c247dc26ea786e9b11">&#9670;&#160;</a></span>getBatLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float getBatLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the current capacity of the battery using predetermined minimum and maximum charge values. </p>
<p>Relies on ADC averaging and makes calculations based on battery voltage. </p><dl class="section return"><dt>Returns</dt><dd>float </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00429">429</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  429</span>                    {</div>
<div class="line"><span class="lineno">  430</span>    adc_select_input(0);</div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordtype">long</span> bat = adc_read();</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; potIterations; i++) {</div>
<div class="line"><span class="lineno">  433</span>        bat += adc_read();</div>
<div class="line"><span class="lineno">  434</span>    }</div>
<div class="line"><span class="lineno">  435</span>    bat /= 1.0 * potIterations;</div>
<div class="line"><span class="lineno">  436</span>    bat = <a class="code hl_define" href="group__BatteryMacros.html#ga24c290b5fa8c0bb248fc15b5bcf873d7">NTM_MAX</a>(bat, <a class="code hl_define" href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a>);</div>
<div class="line"><span class="lineno">  437</span>    bat = <a class="code hl_define" href="group__BatteryMacros.html#ga9a187ecf82734a12819e1283bcb69bab">NTM_MIN</a>(bat, <a class="code hl_define" href="group__BatteryMacros.html#ga7703a5d829fb6d1223ad111a9474fa9b">BAT_MAX_ADC</a>);</div>
<div class="line"><span class="lineno">  438</span>    bat = (bat - <a class="code hl_define" href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a>) * <a class="code hl_define" href="group__BatteryMacros.html#ga4ea44361cc7ac80f146feb2806720fda">BAT_ADC_PER</a>;</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">return</span> bat;</div>
<div class="line"><span class="lineno">  440</span>}</div>
<div class="ttc" id="agroup__BatteryMacros_html_ga24c290b5fa8c0bb248fc15b5bcf873d7"><div class="ttname"><a href="group__BatteryMacros.html#ga24c290b5fa8c0bb248fc15b5bcf873d7">NTM_MAX</a></div><div class="ttdeci">#define NTM_MAX(A, B)</div><div class="ttdoc">Calculates the bigger value between A and B using operator. Essentially: if (A) &gt;= (B) return A....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00056">config.h:56</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga4ea44361cc7ac80f146feb2806720fda"><div class="ttname"><a href="group__BatteryMacros.html#ga4ea44361cc7ac80f146feb2806720fda">BAT_ADC_PER</a></div><div class="ttdeci">#define BAT_ADC_PER</div><div class="ttdoc">Looks strange out of context. Used to calculate the batter capacity i.e. (Current Battery Value - BAT...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00082">config.h:82</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga7703a5d829fb6d1223ad111a9474fa9b"><div class="ttname"><a href="group__BatteryMacros.html#ga7703a5d829fb6d1223ad111a9474fa9b">BAT_MAX_ADC</a></div><div class="ttdeci">#define BAT_MAX_ADC</div><div class="ttdoc">Represents the battery's max capacity from the perspective of the microcontroller....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00069">config.h:69</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga9a187ecf82734a12819e1283bcb69bab"><div class="ttname"><a href="group__BatteryMacros.html#ga9a187ecf82734a12819e1283bcb69bab">NTM_MIN</a></div><div class="ttdeci">#define NTM_MIN(A, B)</div><div class="ttdoc">Calculates the smaller value between A and B using operator. Essentially: if (A) &lt;= (B) return A....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00059">config.h:59</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_gad380f4a571d5444566336f067dfb7b01"><div class="ttname"><a href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a></div><div class="ttdeci">#define BAT_MIN_ADC</div><div class="ttdoc">Represents the battery's min capacity from the perspective of the microcontroller....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00079">config.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70ff0abbdc7d6bd7b82553d2037889fd" name="a70ff0abbdc7d6bd7b82553d2037889fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70ff0abbdc7d6bd7b82553d2037889fd">&#9670;&#160;</a></span>getInputSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long getInputSpeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the percentage power represented by the inputted ADC value from the potentiometer. </p>
<dl class="section return"><dt>Returns</dt><dd>long </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00447">447</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  447</span>                     {</div>
<div class="line"><span class="lineno">  448</span>    adc_select_input(3);</div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordtype">long</span> val = 0;</div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; potIterations; i++) {</div>
<div class="line"><span class="lineno">  451</span>        val += adc_read();</div>
<div class="line"><span class="lineno">  452</span>    }</div>
<div class="line"><span class="lineno">  453</span>    </div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">return</span> long(0.0243 * (val * 1.0 / potIterations) + 1);</div>
<div class="line"><span class="lineno">  455</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e74d3c55ba6d356cd90823775f2d664" name="a5e74d3c55ba6d356cd90823775f2d664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e74d3c55ba6d356cd90823775f2d664">&#9670;&#160;</a></span>getRPM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRPM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses a 1 second timer to extrapolate the revolutions per minute. </p>
<p>Determines the number of revolutions that occur within a second and multiplies it by 60. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00462">462</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  462</span>              {</div>
<div class="line"><span class="lineno">  463</span>    <span class="keyword">static</span> absolute_time_t prevRPMTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  464</span>    absolute_time_t currRPMTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordflow">if</span> (absolute_time_diff_us(prevRPMTime, currRPMTime) &gt;= <a class="code hl_define" href="group__BatteryMacros.html#ga81b58a672e9a97383f06a46f89660b1d">SEC_US</a>) {</div>
<div class="line"><span class="lineno">  467</span>        rpm = <a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(numPulses) * 60.0f;</div>
<div class="line"><span class="lineno">  468</span>        numPulses = 0;</div>
<div class="line"><span class="lineno">  469</span>        prevRPMTime = currRPMTime;</div>
<div class="line"><span class="lineno">  470</span>    }</div>
<div class="line"><span class="lineno">  471</span>}</div>
<div class="ttc" id="agroup__BatteryMacros_html_ga81b58a672e9a97383f06a46f89660b1d"><div class="ttname"><a href="group__BatteryMacros.html#ga81b58a672e9a97383f06a46f89660b1d">SEC_US</a></div><div class="ttdeci">#define SEC_US</div><div class="ttdoc">1 Second in microseconds.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00085">config.h:85</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a8b0e682ac7928c7d2592cb80a81a2874"><div class="ttname"><a href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a></div><div class="ttdeci">float getRevolutions(int count)</div><div class="ttdoc">Takes detected motor signals and converts them to the real-world number of revolutions of the motor s...</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00078">ntm_helpers.cpp:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af70581e416f69b14c5a0bc5e4918b479" name="af70581e416f69b14c5a0bc5e4918b479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70581e416f69b14c5a0bc5e4918b479">&#9670;&#160;</a></span>gpio_ISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpio_ISR </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>gpio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00112">112</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                          {</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> (gpio == motorA_out) {</div>
<div class="line"><span class="lineno">  114</span>        numPulses++;</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> (gpio_get(MOTOR_DIR) == 0) {</div>
<div class="line"><span class="lineno">  116</span>                count--;</div>
<div class="line"><span class="lineno">  117</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  118</span>                count++;</div>
<div class="line"><span class="lineno">  119</span>            }</div>
<div class="line"><span class="lineno">  120</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio == state_input) {</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  122</span>            pressTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  123</span>            button_press_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  124</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio_get(state_input) == 0) {</div>
<div class="line"><span class="lineno">  125</span>            button_release_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span>        </div>
<div class="line"><span class="lineno">  128</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio == msc_input) {</div>
<div class="line"><span class="lineno">  129</span>        mscPressTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  130</span>        button_msc_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7c42980e08859e81090559d51a512b0" name="ac7c42980e08859e81090559d51a512b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c42980e08859e81090559d51a512b0">&#9670;&#160;</a></span>handleButton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleButton </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00475">475</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>                    {</div>
<div class="line"><span class="lineno">  476</span>    <span class="keywordflow">if</span> (button_press_flag) {</div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordflow">if</span> (absolute_time_diff_us(pressTime, now) &gt;= debounce_us) {</div>
<div class="line"><span class="lineno">  478</span>            <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  479</span>                validPress = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  480</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  481</span>                button_press_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  482</span>            }</div>
<div class="line"><span class="lineno">  483</span>        }</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">if</span> (validPress) {</div>
<div class="line"><span class="lineno">  486</span>            <span class="keywordflow">if</span> (absolute_time_diff_us(pressTime, now) &gt;= <a class="code hl_define" href="config_8h.html#ac6f3299722b682ead61165a15c392922">hold_us</a>) {</div>
<div class="line"><span class="lineno">  487</span>                state = ZERO;</div>
<div class="line"><span class="lineno">  488</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  489</span>                gpio_put(MOTOR_DIR, 0);</div>
<div class="line"><span class="lineno">  490</span>                pwm_set_chan_level(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, <a class="code hl_variable" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a>, 255);</div>
<div class="line"><span class="lineno">  491</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  492</span>                sleep_ms(<a class="code hl_define" href="config_8h.html#afce5aaf1a0caf368eaf0db8926a30960">SPIKE_TIME</a>);</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>                button_press_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  495</span>                validPress = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  496</span>            } </div>
<div class="line"><span class="lineno">  497</span>        }</div>
<div class="line"><span class="lineno">  498</span>    }</div>
<div class="line"><span class="lineno">  499</span>}</div>
<div class="ttc" id="aconfig_8h_html_ac6f3299722b682ead61165a15c392922"><div class="ttname"><a href="config_8h.html#ac6f3299722b682ead61165a15c392922">hold_us</a></div><div class="ttdeci">#define hold_us</div><div class="ttdoc">Hold [STATE] for 3 sec to enter ZERO state.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00021">config.h:21</a></div></div>
<div class="ttc" id="aconfig_8h_html_afce5aaf1a0caf368eaf0db8926a30960"><div class="ttname"><a href="config_8h.html#afce5aaf1a0caf368eaf0db8926a30960">SPIKE_TIME</a></div><div class="ttdeci">#define SPIKE_TIME</div><div class="ttdoc">Time in ms used to avoid measuring current spikes during the ZERO state. Without this the ZERO state ...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00027">config.h:27</a></div></div>
<div class="ttc" id="amain_8cpp_html_a23777d4d3d69af11916d27e48261cfb1"><div class="ttname"><a href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a></div><div class="ttdeci">uint channel</div><div class="ttdoc">Global channel value for the PWM module. Automatically determined by chosen pin at runtime....</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00024">ntm_helpers.cpp:24</a></div></div>
<div class="ttc" id="amain_8cpp_html_ac59ebf0340587075ef7d1fc943c78408"><div class="ttname"><a href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a></div><div class="ttdeci">void displayState()</div><div class="ttdoc">Handles the order of information, titles, and instructions shown on the OLED display by state in FSM.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00351">main.cpp:351</a></div></div>
<div class="ttc" id="amain_8cpp_html_ac7597a58fd0a9415759b81dffee974e6"><div class="ttname"><a href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a></div><div class="ttdeci">uint slice</div><div class="ttdoc">Global slice value for the PWM module. Automatically determined by chosen pin at runtime....</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00018">ntm_helpers.cpp:18</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4acf41dad5576bfc9ced017baa2bf524" name="a4acf41dad5576bfc9ced017baa2bf524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4acf41dad5576bfc9ced017baa2bf524">&#9670;&#160;</a></span>handleMSCButton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleMSCButton </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00514">514</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  514</span>                       {</div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">if</span> (button_msc_flag) {</div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">if</span> (absolute_time_diff_us(mscPressTime, now) &gt;= debounce_us) {</div>
<div class="line"><span class="lineno">  517</span>            <span class="keywordflow">if</span> (state == STANDBY || state == FINISH) {</div>
<div class="line"><span class="lineno">  518</span>                <span class="keywordflow">if</span> (gpio_get(state_input) == 0) {</div>
<div class="line"><span class="lineno">  519</span>                    watchdog_enable(1, 1);</div>
<div class="line"><span class="lineno">  520</span>                }</div>
<div class="line"><span class="lineno">  521</span>            }</div>
<div class="line"><span class="lineno">  522</span>            button_msc_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  523</span>        }</div>
<div class="line"><span class="lineno">  524</span>    }</div>
<div class="line"><span class="lineno">  525</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2e93a7266c27d56845381cb2076d391" name="ae2e93a7266c27d56845381cb2076d391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e93a7266c27d56845381cb2076d391">&#9670;&#160;</a></span>handleRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleRelease </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00501">501</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  501</span>                     {</div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordflow">if</span> (button_release_flag) {</div>
<div class="line"><span class="lineno">  503</span>        <span class="keywordflow">if</span> (validPress) {</div>
<div class="line"><span class="lineno">  504</span>            state = nextState;</div>
<div class="line"><span class="lineno">  505</span>            <span class="keywordflow">if</span> (state == CUTTING) {</div>
<div class="line"><span class="lineno">  506</span>                <a class="code hl_function" href="main_8cpp.html#a5ab132489f70371e1c876ba54e9d7011">createDataFile</a>();</div>
<div class="line"><span class="lineno">  507</span>            }</div>
<div class="line"><span class="lineno">  508</span>            validPress = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  509</span>        }</div>
<div class="line"><span class="lineno">  510</span>        button_release_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="line"><span class="lineno">  512</span>}</div>
<div class="ttc" id="amain_8cpp_html_a5ab132489f70371e1c876ba54e9d7011"><div class="ttname"><a href="main_8cpp.html#a5ab132489f70371e1c876ba54e9d7011">createDataFile</a></div><div class="ttdeci">void createDataFile()</div><div class="ttdoc">Creates/writes datalog to the microSD via FatFS implementation. Writes the header of the file if succ...</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00322">main.cpp:322</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00134">134</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>           {</div>
<div class="line"><span class="lineno">  135</span><span class="preprocessor">    #pragma region TESTING</span></div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    <span class="comment">//testingSuite();</span></div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">//testMSC();</span></div>
<div class="line"><span class="lineno">  139</span>    <span class="comment">//testSD();</span></div>
<div class="line"><span class="lineno">  140</span>    <span class="comment">//testSPI();</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span><span class="preprocessor">    #pragma endregion</span></div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="comment">// MSC: Initialize board</span></div>
<div class="line"><span class="lineno">  145</span>    board_init();</div>
<div class="line"><span class="lineno">  146</span>    tud_init(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">// Initialize serial port and wait for serial monitor</span></div>
<div class="line"><span class="lineno">  149</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  150</span>    gpio_init(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  151</span>    gpio_put(MOTOR_PWM, 0);</div>
<div class="line"><span class="lineno">  152</span>    sleep_ms(1000);</div>
<div class="line"><span class="lineno">  153</span>    </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// ==== General Initialization ==== //</span></div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_function" href="ntm__helpers_8h.html#a8c6d7458362f0a1d72f048e5c28dafc9">board_gpio_init</a>();</div>
<div class="line"><span class="lineno">  156</span>    bat_per = <a class="code hl_function" href="main_8cpp.html#a14b5f26e2ea4e4c247dc26ea786e9b11">getBatLevel</a>();</div>
<div class="line"><span class="lineno">  157</span>    <a class="code hl_function" href="main_8cpp.html#a8c50659733df2acac1580d209db8e97f">oled_init</a>();</div>
<div class="line"><span class="lineno">  158</span>    state = WAIT;</div>
<div class="line"><span class="lineno">  159</span>    nextState = STANDBY;</div>
<div class="line"><span class="lineno">  160</span>    INA219 ina219(MY_I2C, INA219_ADDR);</div>
<div class="line"><span class="lineno">  161</span>    ina219.calibrate(0.1, 3.2);</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="comment">// ==== Interrupts ==== //</span></div>
<div class="line"><span class="lineno">  164</span>    gpio_set_irq_enabled_with_callback(motorA_out, GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>, &amp;gpio_ISR);</div>
<div class="line"><span class="lineno">  165</span>    gpio_set_irq_enabled(state_input, GPIO_IRQ_EDGE_RISE | GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  166</span>    gpio_set_irq_enabled(msc_input, GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  169</span>        now = get_absolute_time();</div>
<div class="line"><span class="lineno">  170</span>        int64_t time_ms = to_ms_since_boot(now);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        handleRelease();</div>
<div class="line"><span class="lineno">  173</span>        handleButton();</div>
<div class="line"><span class="lineno">  174</span>        handleMSCButton();</div>
<div class="line"><span class="lineno">  175</span>        <a class="code hl_function" href="main_8cpp.html#a5e74d3c55ba6d356cd90823775f2d664">getRPM</a>();</div>
<div class="line"><span class="lineno">  176</span>        </div>
<div class="line"><span class="lineno">  177</span>        bat_per = <a class="code hl_function" href="main_8cpp.html#a14b5f26e2ea4e4c247dc26ea786e9b11">getBatLevel</a>();</div>
<div class="line"><span class="lineno">  178</span>        current_mA = ina219.read_current() * 1000;</div>
<div class="line"><span class="lineno">  179</span>        displacement = <a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) * 0.5f;</div>
<div class="line"><span class="lineno">  180</span>        force = compute_force(FX29_read(MY_I2C, FX29_ADDR));</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">if</span> (MAF_counter == <a class="code hl_define" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>) {</div>
<div class="line"><span class="lineno">  183</span>            MAF_counter = 0;</div>
<div class="line"><span class="lineno">  184</span>        }</div>
<div class="line"><span class="lineno">  185</span>        <span class="comment">// Remove oldest value and add newest value to sum</span></div>
<div class="line"><span class="lineno">  186</span>        MAF_sum -= MAF[MAF_counter];</div>
<div class="line"><span class="lineno">  187</span>        MAF_sum += current_mA;</div>
<div class="line"><span class="lineno">  188</span>        MAF[MAF_counter] = current_mA;</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>        MAF_counter++;</div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordtype">float</span> MAF_current = MAF_sum * 1.0f/<a class="code hl_define" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>;</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">switch</span>(state) {</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">case</span> WAIT: {</div>
<div class="line"><span class="lineno">  195</span>                enableMSC();</div>
<div class="line"><span class="lineno">  196</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  197</span>                nextState = STANDBY;</div>
<div class="line"><span class="lineno">  198</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  199</span>            }</div>
<div class="line"><span class="lineno">  200</span>            <span class="keywordflow">case</span> STANDBY: {</div>
<div class="line"><span class="lineno">  201</span>                disableMSC();</div>
<div class="line"><span class="lineno">  202</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  203</span>                </div>
<div class="line"><span class="lineno">  204</span>                temp_speed = <a class="code hl_function" href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a>();</div>
<div class="line"><span class="lineno">  205</span>                speed_lvl = uint16_t(temp_speed / 100.0f * 255.0f); </div>
<div class="line"><span class="lineno">  206</span>                </div>
<div class="line"><span class="lineno">  207</span>                resetFiltering();</div>
<div class="line"><span class="lineno">  208</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  209</span>                nextState = CUTTING;</div>
<div class="line"><span class="lineno">  210</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  211</span>            }</div>
<div class="line"><span class="lineno">  212</span>            <span class="keywordflow">case</span> CUTTING: {</div>
<div class="line"><span class="lineno">  213</span>                speed_lvl = speed_lvl;</div>
<div class="line"><span class="lineno">  214</span>                lp_current = <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a> * current_mA + (1 - <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>) * lp_current;</div>
<div class="line"><span class="lineno">  215</span>                f_printf(&amp;fil, <span class="stringliteral">&quot;%s,%lld,%f,%f,%f,%f,%f,%f\n&quot;</span>, <span class="stringliteral">&quot;CUTTING&quot;</span>, time_ms, current_mA, lp_current, MAF_current, rpm, displacement, force);</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>                <span class="comment">// ==== SAFETY CHECK ==== //</span></div>
<div class="line"><span class="lineno">  218</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) &gt; <a class="code hl_variable" href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a>) {</div>
<div class="line"><span class="lineno">  219</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  220</span>                    state = REMOVAL;</div>
<div class="line"><span class="lineno">  221</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  222</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, speed_lvl);</div>
<div class="line"><span class="lineno">  223</span>                }</div>
<div class="line"><span class="lineno">  224</span>                </div>
<div class="line"><span class="lineno">  225</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  226</span>                nextState = REMOVAL;</div>
<div class="line"><span class="lineno">  227</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  228</span>            }</div>
<div class="line"><span class="lineno">  229</span>            <span class="keywordflow">case</span> REMOVAL: {</div>
<div class="line"><span class="lineno">  230</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, 0);</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>                temp_speed = <a class="code hl_function" href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a>();</div>
<div class="line"><span class="lineno">  233</span>                speed_lvl = int(temp_speed / 100.0f * 255.0f);</div>
<div class="line"><span class="lineno">  234</span>                resetFiltering();</div>
<div class="line"><span class="lineno">  235</span>                </div>
<div class="line"><span class="lineno">  236</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  237</span>                nextState = EXITING;</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  239</span>            }</div>
<div class="line"><span class="lineno">  240</span>            <span class="keywordflow">case</span> EXITING: {</div>
<div class="line"><span class="lineno">  241</span>                speed_lvl = speed_lvl;</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>                lp_current = <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a> * current_mA + (1 - <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>) * lp_current;</div>
<div class="line"><span class="lineno">  244</span>                f_printf(&amp;fil, <span class="stringliteral">&quot;%s,%lld,%f,%f,%f,%f,%f,%f\n&quot;</span>, <span class="stringliteral">&quot;EXITING&quot;</span>, time_ms, current_mA, lp_current, MAF_current, rpm, displacement, force);</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>                <span class="comment">// ==== SAFETY CHECK ==== //</span></div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) &lt; <a class="code hl_variable" href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a>) {</div>
<div class="line"><span class="lineno">  248</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  249</span>                    state = FINISH;</div>
<div class="line"><span class="lineno">  250</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  251</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, speed_lvl);</div>
<div class="line"><span class="lineno">  252</span>                }</div>
<div class="line"><span class="lineno">  253</span>                </div>
<div class="line"><span class="lineno">  254</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  255</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  256</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  257</span>            }</div>
<div class="line"><span class="lineno">  258</span>            <span class="keywordflow">case</span> FINISH: {</div>
<div class="line"><span class="lineno">  259</span>                f_close(&amp;fil);</div>
<div class="line"><span class="lineno">  260</span>                f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>                nextState = STANDBY;</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  268</span>            }</div>
<div class="line"><span class="lineno">  269</span>            <span class="keywordflow">case</span> ZERO: {</div>
<div class="line"><span class="lineno">  270</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#ga3249ae087e43a52e0182917edca0dc12">MOTOR_ON</a>);</div>
<div class="line"><span class="lineno">  271</span>                </div>
<div class="line"><span class="lineno">  272</span>                <span class="keywordflow">if</span> (current_mA &gt; <a class="code hl_define" href="config_8h.html#a1923668201fdaeaced6d7935492b1a1f">CUTOFF_STALL</a>) {</div>
<div class="line"><span class="lineno">  273</span>                    count = 0;</div>
<div class="line"><span class="lineno">  274</span>                    state = FINISH;</div>
<div class="line"><span class="lineno">  275</span>                }</div>
<div class="line"><span class="lineno">  276</span>                </div>
<div class="line"><span class="lineno">  277</span>                <a class="code hl_function" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a>();</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  280</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  281</span>            }</div>
<div class="line"><span class="lineno">  282</span>        }</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  285</span>}</div>
<div class="ttc" id="aconfig_8h_html_a1923668201fdaeaced6d7935492b1a1f"><div class="ttname"><a href="config_8h.html#a1923668201fdaeaced6d7935492b1a1f">CUTOFF_STALL</a></div><div class="ttdeci">#define CUTOFF_STALL</div><div class="ttdoc">Stall current that determines when the ZERO state is complete. If the device detects this current,...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00028">config.h:28</a></div></div>
<div class="ttc" id="agroup__MotorMacros_html_ga3249ae087e43a52e0182917edca0dc12"><div class="ttname"><a href="group__MotorMacros.html#ga3249ae087e43a52e0182917edca0dc12">MOTOR_ON</a></div><div class="ttdeci">#define MOTOR_ON</div><div class="ttdoc">Maximum PWM value for motor.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00041">config.h:41</a></div></div>
<div class="ttc" id="agroup__MotorMacros_html_gad1b1c6c44e1e025f7a748396b2e6f9f4"><div class="ttname"><a href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a></div><div class="ttdeci">#define MOTOR_OFF</div><div class="ttdoc">Minimum PWM value for motor.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00042">config.h:42</a></div></div>
<div class="ttc" id="amain_8cpp_html_a14b5f26e2ea4e4c247dc26ea786e9b11"><div class="ttname"><a href="main_8cpp.html#a14b5f26e2ea4e4c247dc26ea786e9b11">getBatLevel</a></div><div class="ttdeci">float getBatLevel()</div><div class="ttdoc">Calculates the current capacity of the battery using predetermined minimum and maximum charge values.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00429">main.cpp:429</a></div></div>
<div class="ttc" id="amain_8cpp_html_a5988591b58aabf7567019b975da7e7aa"><div class="ttname"><a href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a></div><div class="ttdeci">int bwRev</div><div class="ttdoc">Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions :...</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00023">main.cpp:23</a></div></div>
<div class="ttc" id="amain_8cpp_html_a5e74d3c55ba6d356cd90823775f2d664"><div class="ttname"><a href="main_8cpp.html#a5e74d3c55ba6d356cd90823775f2d664">getRPM</a></div><div class="ttdeci">void getRPM()</div><div class="ttdoc">Uses a 1 second timer to extrapolate the revolutions per minute.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00462">main.cpp:462</a></div></div>
<div class="ttc" id="amain_8cpp_html_a6af9f0d27369b3f4a063f61c51c198f3"><div class="ttname"><a href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a></div><div class="ttdeci">#define MAF_SZ</div><div class="ttdoc">Window size for Moving Average Filter.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00024">main.cpp:24</a></div></div>
<div class="ttc" id="amain_8cpp_html_a70ff0abbdc7d6bd7b82553d2037889fd"><div class="ttname"><a href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a></div><div class="ttdeci">long getInputSpeed()</div><div class="ttdoc">Calculates the percentage power represented by the inputted ADC value from the potentiometer.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00447">main.cpp:447</a></div></div>
<div class="ttc" id="amain_8cpp_html_a8c50659733df2acac1580d209db8e97f"><div class="ttname"><a href="main_8cpp.html#a8c50659733df2acac1580d209db8e97f">oled_init</a></div><div class="ttdeci">void oled_init()</div><div class="ttdoc">Initializes the 128x64 OLED display and communication via I2C connections.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00293">main.cpp:293</a></div></div>
<div class="ttc" id="amain_8cpp_html_a92c826e08ae550b58a56ea3f55c49311"><div class="ttname"><a href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a></div><div class="ttdeci">int fwRev</div><div class="ttdoc">Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : d...</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00022">main.cpp:22</a></div></div>
<div class="ttc" id="amain_8cpp_html_a9400840ebc875d8e59c484e65a643b77"><div class="ttname"><a href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a></div><div class="ttdeci">#define LP_ALPHA</div><div class="ttdoc">Smoothing factor for LP Filter.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00025">main.cpp:25</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a1a668d0f88bcacc451fca6bf25511b62"><div class="ttname"><a href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a></div><div class="ttdeci">void setMotor(bool direction, uint16_t power)</div><div class="ttdoc">Turns on motor with configureable speed and direction values.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00067">ntm_helpers.cpp:67</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a8c6d7458362f0a1d72f048e5c28dafc9"><div class="ttname"><a href="ntm__helpers_8h.html#a8c6d7458362f0a1d72f048e5c28dafc9">board_gpio_init</a></div><div class="ttdeci">void board_gpio_init()</div><div class="ttdoc">Initiates all GPIO pins as well as communication protocols.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00026">ntm_helpers.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c50659733df2acac1580d209db8e97f" name="a8c50659733df2acac1580d209db8e97f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c50659733df2acac1580d209db8e97f">&#9670;&#160;</a></span>oled_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oled_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the 128x64 OLED display and communication via I2C connections. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00293">293</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>                 {</div>
<div class="line"><span class="lineno">  294</span>    <span class="comment">// External_vcc must be false for this to work</span></div>
<div class="line"><span class="lineno">  295</span>    oled.external_vcc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordtype">bool</span> oled_status = ssd1306_init(</div>
<div class="line"><span class="lineno">  297</span>        &amp;oled,</div>
<div class="line"><span class="lineno">  298</span>        128,</div>
<div class="line"><span class="lineno">  299</span>        64,</div>
<div class="line"><span class="lineno">  300</span>        OLED_ADDR,</div>
<div class="line"><span class="lineno">  301</span>        MY_I2C</div>
<div class="line"><span class="lineno">  302</span>    );</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span> (oled_status) {</div>
<div class="line"><span class="lineno">  305</span>        ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  306</span>        ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;RECORDS&quot;</span>);</div>
<div class="line"><span class="lineno">  307</span>        ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  308</span>        ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ HOLD  STA  : ZERO ]&quot;</span>);</div>
<div class="line"><span class="lineno">  309</span>        ssd1306_draw_string(&amp;oled, 0, 45, 1, <span class="stringliteral">&quot;V1.0 - 5/6/25&quot;</span>);</div>
<div class="line"><span class="lineno">  310</span>        ssd1306_draw_string(&amp;oled, 0, 55, 1, <span class="stringliteral">&quot;Author: Thomas Chang&quot;</span>);</div>
<div class="line"><span class="lineno">  311</span>        <a class="code hl_function" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a>(0);</div>
<div class="line"><span class="lineno">  312</span>        ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  313</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  314</span>        printf(<span class="stringliteral">&quot;OLED initialization failed.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af7e37f59651692a7089d2b8ed312c7d3" name="af7e37f59651692a7089d2b8ed312c7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e37f59651692a7089d2b8ed312c7d3">&#9670;&#160;</a></span>resetFiltering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetFiltering </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00527">527</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  527</span>                      {</div>
<div class="line"><span class="lineno">  528</span>    <span class="comment">// Initialize all moving average filter values to zero.</span></div>
<div class="line"><span class="lineno">  529</span>    MAF_counter = 0;</div>
<div class="line"><span class="lineno">  530</span>    MAF_sum = 0;</div>
<div class="line"><span class="lineno">  531</span>    memset(MAF, 0, <span class="keyword">sizeof</span>(MAF));</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>    <span class="comment">// Reset previous low pass output.</span></div>
<div class="line"><span class="lineno">  534</span>    lp_current = 0;</div>
<div class="line"><span class="lineno">  535</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a64461563174d034ff94d443f2c172622" name="a64461563174d034ff94d443f2c172622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64461563174d034ff94d443f2c172622">&#9670;&#160;</a></span>testingSuite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testingSuite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00548">548</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  548</span>                    {</div>
<div class="line"><span class="lineno">  549</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  550</span>    sleep_ms(1000);</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    gpio_init(26);</div>
<div class="line"><span class="lineno">  553</span>    gpio_set_dir(26, GPIO_OUT);</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>    <span class="comment">// I2C</span></div>
<div class="line"><span class="lineno">  556</span>    i2c_init(i2c0, 400000);</div>
<div class="line"><span class="lineno">  557</span>    gpio_set_function(I2C_SDA, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  558</span>    gpio_set_function(I2C_SCL, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  559</span>    gpio_pull_up(I2C_SDA);</div>
<div class="line"><span class="lineno">  560</span>    gpio_pull_up(I2C_SCL);</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    <span class="comment">// OLED</span></div>
<div class="line"><span class="lineno">  563</span>    <a class="code hl_function" href="main_8cpp.html#a8c50659733df2acac1580d209db8e97f">oled_init</a>();</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>    <span class="comment">// BUTTMOTOR_ONS</span></div>
<div class="line"><span class="lineno">  566</span>    gpio_init(state_input);</div>
<div class="line"><span class="lineno">  567</span>    gpio_set_dir(state_input, GPIO_IN);</div>
<div class="line"><span class="lineno">  568</span>    gpio_pull_down(state_input);</div>
<div class="line"><span class="lineno">  569</span>    gpio_init(msc_input);</div>
<div class="line"><span class="lineno">  570</span>    gpio_set_dir(msc_input, GPIO_IN);</div>
<div class="line"><span class="lineno">  571</span>    gpio_pull_down(msc_input);</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>    <span class="comment">// POTENTIOMETER</span></div>
<div class="line"><span class="lineno">  574</span>    adc_init();</div>
<div class="line"><span class="lineno">  575</span>    adc_gpio_init(speed_input);</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="comment">// Motor Control</span></div>
<div class="line"><span class="lineno">  578</span>    uint <a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a> = pwm_gpio_to_slice_num(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  579</span>    uint <a class="code hl_variable" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a> = pwm_gpio_to_channel(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  580</span>    gpio_set_function(MOTOR_PWM, GPIO_FUNC_PWM);</div>
<div class="line"><span class="lineno">  581</span>    pwm_set_clkdiv(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, 48.83f);</div>
<div class="line"><span class="lineno">  582</span>    pwm_set_wrap(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, 255);</div>
<div class="line"><span class="lineno">  583</span>    pwm_set_chan_level(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, PWM_CHAN_A, 0);</div>
<div class="line"><span class="lineno">  584</span>    pwm_set_enabled(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  585</span>    gpio_init(MOTOR_DIR);</div>
<div class="line"><span class="lineno">  586</span>    gpio_set_dir(MOTOR_DIR, GPIO_OUT);</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  589</span>        <span class="comment">// Testing functionality of pushbuttons.</span></div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">while</span> (gpio_get(msc_input) == 1 || gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  591</span>            gpio_put(26, 1);</div>
<div class="line"><span class="lineno">  592</span>        }</div>
<div class="line"><span class="lineno">  593</span>        </div>
<div class="line"><span class="lineno">  594</span>        <span class="comment">// Testing potentiometer.</span></div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordtype">long</span> test_pot = <a class="code hl_function" href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a>() * 10;</div>
<div class="line"><span class="lineno">  596</span>        gpio_put(26, 1);</div>
<div class="line"><span class="lineno">  597</span>        sleep_ms(test_pot);</div>
<div class="line"><span class="lineno">  598</span>        gpio_put(26, 0);</div>
<div class="line"><span class="lineno">  599</span>        sleep_ms(test_pot);</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>        <span class="comment">// Testing functionality of motor.</span></div>
<div class="line"><span class="lineno">  602</span>        <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  603</span>            <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, 255);</div>
<div class="line"><span class="lineno">  604</span>            sleep_ms(3000);</div>
<div class="line"><span class="lineno">  605</span>            <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  606</span>        }</div>
<div class="line"><span class="lineno">  607</span>        </div>
<div class="line"><span class="lineno">  608</span>    }</div>
<div class="line"><span class="lineno">  609</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4765141d8281f1873714923a260f93fc" name="a4765141d8281f1873714923a260f93fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4765141d8281f1873714923a260f93fc">&#9670;&#160;</a></span>testMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00610">610</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  610</span>               {</div>
<div class="line"><span class="lineno">  611</span>    board_init();</div>
<div class="line"><span class="lineno">  612</span>    printf(<span class="stringliteral">&quot;\033[2J\033[H&quot;</span>);</div>
<div class="line"><span class="lineno">  613</span>    tud_init(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  614</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>    <span class="comment">// I2C</span></div>
<div class="line"><span class="lineno">  617</span>    i2c_init(i2c0, 400000);</div>
<div class="line"><span class="lineno">  618</span>    gpio_set_function(I2C_SDA, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  619</span>    gpio_set_function(I2C_SCL, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  620</span>    gpio_pull_up(I2C_SDA);</div>
<div class="line"><span class="lineno">  621</span>    gpio_pull_up(I2C_SCL);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>    uint32_t sys_freq = clock_get_hz(clk_sys);</div>
<div class="line"><span class="lineno">  624</span>    std::string temp = to_string(sys_freq);</div>
<div class="line"><span class="lineno">  625</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* sys_freq_str = temp.c_str();</div>
<div class="line"><span class="lineno">  626</span>    oled.external_vcc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  627</span>    <span class="keywordtype">bool</span> oled_status = ssd1306_init(&amp;oled, 128, 64, OLED_ADDR, MY_I2C);</div>
<div class="line"><span class="lineno">  628</span>    </div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">if</span> (oled_status) {</div>
<div class="line"><span class="lineno">  630</span>        ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  631</span>        ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;Sys Clock:&quot;</span>);</div>
<div class="line"><span class="lineno">  632</span>        ssd1306_draw_string(&amp;oled, 0, 20, 1 , sys_freq_str);</div>
<div class="line"><span class="lineno">  633</span>        ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  634</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  635</span>        printf(<span class="stringliteral">&quot;OLED initialization failed.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span>    }</div>
<div class="line"><span class="lineno">  637</span>    </div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  640</span>        tud_task();</div>
<div class="line"><span class="lineno">  641</span>    }</div>
<div class="line"><span class="lineno">  642</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ada5a15c76153823533f203632f7d1d62" name="ada5a15c76153823533f203632f7d1d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada5a15c76153823533f203632f7d1d62">&#9670;&#160;</a></span>testSD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testSD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00643">643</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  643</span>              {</div>
<div class="line"><span class="lineno">  644</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  645</span>    tusb_init();</div>
<div class="line"><span class="lineno">  646</span>    sleep_ms(5000);</div>
<div class="line"><span class="lineno">  647</span>    printf(<span class="stringliteral">&quot;Testing if seral works.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>    FATFS fs;</div>
<div class="line"><span class="lineno">  650</span>    FRESULT fr = f_mount(&amp;fs, <span class="stringliteral">&quot;&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  651</span>    <span class="keywordflow">if</span> (FR_OK != fr) {</div>
<div class="line"><span class="lineno">  652</span>        panic(<span class="stringliteral">&quot;f_mount error: %s (%d)\n&quot;</span>, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  653</span>    }</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>    <span class="comment">// Open a file and write to it</span></div>
<div class="line"><span class="lineno">  656</span>    FIL fil;</div>
<div class="line"><span class="lineno">  657</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> filename = <span class="stringliteral">&quot;filename.txt&quot;</span>;</div>
<div class="line"><span class="lineno">  658</span>    fr = f_open(&amp;fil, filename, FA_OPEN_APPEND | FA_WRITE);</div>
<div class="line"><span class="lineno">  659</span>    <span class="keywordflow">if</span> (FR_OK != fr &amp;&amp; FR_EXIST != fr) {</div>
<div class="line"><span class="lineno">  660</span>        panic(<span class="stringliteral">&quot;f_open(%s) error: %s (%d)\n&quot;</span>, filename, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  661</span>    }</div>
<div class="line"><span class="lineno">  662</span>    <span class="keywordflow">if</span> (f_printf(&amp;fil, <span class="stringliteral">&quot;Hello, world!\n&quot;</span>) &lt; 0) {</div>
<div class="line"><span class="lineno">  663</span>        printf(<span class="stringliteral">&quot;f_printf failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  664</span>    }</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>    <span class="comment">// Close the file</span></div>
<div class="line"><span class="lineno">  667</span>    fr = f_close(&amp;fil);</div>
<div class="line"><span class="lineno">  668</span>    <span class="keywordflow">if</span> (FR_OK != fr) {</div>
<div class="line"><span class="lineno">  669</span>        printf(<span class="stringliteral">&quot;f_close error: %s (%d)\n&quot;</span>, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  670</span>    }</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>    <span class="comment">// Unmount the SD card</span></div>
<div class="line"><span class="lineno">  673</span>    f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  676</span>        printf(<span class="stringliteral">&quot;Testing serial.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  677</span>        sleep_ms(1000);</div>
<div class="line"><span class="lineno">  678</span>    }</div>
<div class="line"><span class="lineno">  679</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3e2ce6f76284e4e63fab85506c67907b" name="a3e2ce6f76284e4e63fab85506c67907b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2ce6f76284e4e63fab85506c67907b">&#9670;&#160;</a></span>bat_per</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long bat_per = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00057">57</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a268172ec6be901b1e9c5f4212cee806b" name="a268172ec6be901b1e9c5f4212cee806b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a268172ec6be901b1e9c5f4212cee806b">&#9670;&#160;</a></span>button_msc_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_msc_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00090">90</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ae964ac24618b7c245998d37cdd06acd3" name="ae964ac24618b7c245998d37cdd06acd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae964ac24618b7c245998d37cdd06acd3">&#9670;&#160;</a></span>button_press_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_press_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00088">88</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a548278ea37054952a50f6ef9ce6413ce" name="a548278ea37054952a50f6ef9ce6413ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a548278ea37054952a50f6ef9ce6413ce">&#9670;&#160;</a></span>button_release_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_release_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00089">89</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a5988591b58aabf7567019b975da7e7aa" name="a5988591b58aabf7567019b975da7e7aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5988591b58aabf7567019b975da7e7aa">&#9670;&#160;</a></span>bwRev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bwRev = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1) </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00023">23</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a23777d4d3d69af11916d27e48261cfb1" name="a23777d4d3d69af11916d27e48261cfb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23777d4d3d69af11916d27e48261cfb1">&#9670;&#160;</a></span>channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint channel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global channel value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to PWM output pin itself. Please see RP2040 documentation. </p>

<p class="definition">Definition at line <a class="el" href="ntm__helpers_8cpp_source.html#l00024">24</a> of file <a class="el" href="ntm__helpers_8cpp_source.html">ntm_helpers.cpp</a>.</p>

</div>
</div>
<a id="ad43c3812e6d13e0518d9f8b8f463ffcf" name="ad43c3812e6d13e0518d9f8b8f463ffcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43c3812e6d13e0518d9f8b8f463ffcf">&#9670;&#160;</a></span>count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00058">58</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a21215ef0aca60874669e1e2f7425e70c" name="a21215ef0aca60874669e1e2f7425e70c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21215ef0aca60874669e1e2f7425e70c">&#9670;&#160;</a></span>currBug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t currBug = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00082">82</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aa7d2f7d0c2e8d8f3a6428b8225202ea3" name="aa7d2f7d0c2e8d8f3a6428b8225202ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d2f7d0c2e8d8f3a6428b8225202ea3">&#9670;&#160;</a></span>current_mA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float current_mA = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00066">66</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a23d4a56445e448ecc3a9c7143fe0c832" name="a23d4a56445e448ecc3a9c7143fe0c832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d4a56445e448ecc3a9c7143fe0c832">&#9670;&#160;</a></span>displacement</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float displacement = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00068">68</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a4be63952e3c9cb0f46f9e592b3c78714" name="a4be63952e3c9cb0f46f9e592b3c78714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be63952e3c9cb0f46f9e592b3c78714">&#9670;&#160;</a></span>fil</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FIL fil</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00096">96</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ab1e3ee7820c8f54b680f492ef5c0d1ed" name="ab1e3ee7820c8f54b680f492ef5c0d1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e3ee7820c8f54b680f492ef5c0d1ed">&#9670;&#160;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCHAR filename[20] = &quot;data0.csv\0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00097">97</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5af4859884ea5c925366abfbdb0ef8f" name="ad5af4859884ea5c925366abfbdb0ef8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5af4859884ea5c925366abfbdb0ef8f">&#9670;&#160;</a></span>filesys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FATFS filesys</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00095">95</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad0952eff2667e5af2b307ba4f6d0b06b" name="ad0952eff2667e5af2b307ba4f6d0b06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0952eff2667e5af2b307ba4f6d0b06b">&#9670;&#160;</a></span>force</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float force = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00067">67</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a92c826e08ae550b58a56ea3f55c49311" name="a92c826e08ae550b58a56ea3f55c49311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92c826e08ae550b58a56ea3f55c49311">&#9670;&#160;</a></span>fwRev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fwRev = 50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1) </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00022">22</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5f7a9c2f3b2608343ddf46bcfcac2c2" name="ad5f7a9c2f3b2608343ddf46bcfcac2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f7a9c2f3b2608343ddf46bcfcac2c2">&#9670;&#160;</a></span>lp_current</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float lp_current = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00070">70</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a37794ae42b6a8116fa24f997b634dba9" name="a37794ae42b6a8116fa24f997b634dba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37794ae42b6a8116fa24f997b634dba9">&#9670;&#160;</a></span>MAF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MAF[<a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>] = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00071">71</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{0};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a891ae364a9c7853fd67cdb10cfc870c8" name="a891ae364a9c7853fd67cdb10cfc870c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a891ae364a9c7853fd67cdb10cfc870c8">&#9670;&#160;</a></span>MAF_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MAF_counter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00072">72</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aef72076a36ad8bc9405e594d784e040b" name="aef72076a36ad8bc9405e594d784e040b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef72076a36ad8bc9405e594d784e040b">&#9670;&#160;</a></span>MAF_sum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MAF_sum = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00073">73</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a0d24a7e8ef01eb2683901eb25396beed" name="a0d24a7e8ef01eb2683901eb25396beed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d24a7e8ef01eb2683901eb25396beed">&#9670;&#160;</a></span>motor_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool motor_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00087">87</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a6564e8259eebddb283f25451cd7fd364" name="a6564e8259eebddb283f25451cd7fd364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6564e8259eebddb283f25451cd7fd364">&#9670;&#160;</a></span>mscPressTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t mscPressTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00064">64</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a434ef2e67e7d14c2f6a753c08a5eae49" name="a434ef2e67e7d14c2f6a753c08a5eae49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434ef2e67e7d14c2f6a753c08a5eae49">&#9670;&#160;</a></span>nextState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum states state nextState</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00109">109</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ae1f37897ed52586bce688beb5be8f50e" name="ae1f37897ed52586bce688beb5be8f50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f37897ed52586bce688beb5be8f50e">&#9670;&#160;</a></span>now</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t now = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00060">60</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac6f130727d2275823bd3040581e801a5" name="ac6f130727d2275823bd3040581e801a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6f130727d2275823bd3040581e801a5">&#9670;&#160;</a></span>numPulses</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numPulses = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00059">59</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a03de839a9debec4f2265023b765444ad" name="a03de839a9debec4f2265023b765444ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03de839a9debec4f2265023b765444ad">&#9670;&#160;</a></span>oled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssd1306_t oled</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00054">54</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a029fea14c173ec8d34f33c8594b95db0" name="a029fea14c173ec8d34f33c8594b95db0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029fea14c173ec8d34f33c8594b95db0">&#9670;&#160;</a></span>pressedTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t pressedTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00063">63</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5a5c46842ef8862d2ccd9e7bd3aec63" name="ad5a5c46842ef8862d2ccd9e7bd3aec63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a5c46842ef8862d2ccd9e7bd3aec63">&#9670;&#160;</a></span>pressTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t pressTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00062">62</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac0799c2e54cccc1be7e9b4a1a9fa780c" name="ac0799c2e54cccc1be7e9b4a1a9fa780c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0799c2e54cccc1be7e9b4a1a9fa780c">&#9670;&#160;</a></span>prevBug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t prevBug = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00081">81</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a597777ddfcfc40b6553d91789dfd343f" name="a597777ddfcfc40b6553d91789dfd343f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a597777ddfcfc40b6553d91789dfd343f">&#9670;&#160;</a></span>prevTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t prevTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00061">61</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a25e39b399c2a11f0d76e42ab8241a910" name="a25e39b399c2a11f0d76e42ab8241a910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e39b399c2a11f0d76e42ab8241a910">&#9670;&#160;</a></span>rpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float rpm = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00065">65</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac7597a58fd0a9415759b81dffee974e6" name="ac7597a58fd0a9415759b81dffee974e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7597a58fd0a9415759b81dffee974e6">&#9670;&#160;</a></span>slice</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint slice</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global slice value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to the organization of PWM configurations by clock. Please see RP2040 documentation. </p>

<p class="definition">Definition at line <a class="el" href="ntm__helpers_8cpp_source.html#l00018">18</a> of file <a class="el" href="ntm__helpers_8cpp_source.html">ntm_helpers.cpp</a>.</p>

</div>
</div>
<a id="a1fef9435f436bfd601806a7a0bef54bb" name="a1fef9435f436bfd601806a7a0bef54bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fef9435f436bfd601806a7a0bef54bb">&#9670;&#160;</a></span>speed_lvl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t speed_lvl = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00055">55</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="af04968100075345ffc60b9ffe62b4c9c" name="af04968100075345ffc60b9ffe62b4c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04968100075345ffc60b9ffe62b4c9c">&#9670;&#160;</a></span>temp_speed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long temp_speed = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00056">56</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="accd9653a1b3ee09644723877d2aa36e1" name="accd9653a1b3ee09644723877d2aa36e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accd9653a1b3ee09644723877d2aa36e1">&#9670;&#160;</a></span>validPress</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool validPress = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00473">473</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
