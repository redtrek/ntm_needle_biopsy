<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Biopsy Needle: /home/redtrek/NTM/ntm_needle_biopsy/code/biopsy_needle/src/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Smart Biopsy Needle<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">This project focuses on the electronics implementation for the University of Florida Nontraditional Manufacturing Lab&#39;s aspiration-assisted biopsy needle.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is the main file for the smart biopsy needle. It handles the high level operation of the state machine, sensors, motors, and display. If onboarding, LOOK AT THIS FILE FIRST. Close all pragma regions and just try to understand the main function.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ntm__helpers_8h_source.html">include/ntm_helpers.h</a>&quot;</code><br />
<code>#include &quot;../libs/INA219/INA219.h&quot;</code><br />
<code>#include &quot;../libs/SSD1306/ssd1306.h&quot;</code><br />
<code>#include &quot;../libs/FX29/fx29.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#a_2home_2redtrek_2NTM_2ntm__needle__biopsy_2code_2biopsy__needle_2src_2main_8cpp" alt=""/></div>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6af9f0d27369b3f4a063f61c51c198f3" id="r_a6af9f0d27369b3f4a063f61c51c198f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a6af9f0d27369b3f4a063f61c51c198f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Window size for Moving Average Filter.  <br /></td></tr>
<tr class="separator:a6af9f0d27369b3f4a063f61c51c198f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9400840ebc875d8e59c484e65a643b77" id="r_a9400840ebc875d8e59c484e65a643b77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>&#160;&#160;&#160;0.1f</td></tr>
<tr class="memdesc:a9400840ebc875d8e59c484e65a643b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smoothing factor for LP Filter.  <br /></td></tr>
<tr class="separator:a9400840ebc875d8e59c484e65a643b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa19be6305a5a4485e1e70de70ed7d677" id="r_aa19be6305a5a4485e1e70de70ed7d677"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>states</b> { <br />
&#160;&#160;<b>WAIT</b>
, <b>STANDBY</b>
, <b>CUTTING</b>
, <b>REMOVAL</b>
, <br />
&#160;&#160;<b>EXITING</b>
, <b>FINISH</b>
, <b>ZERO</b>
<br />
 }</td></tr>
<tr class="separator:aa19be6305a5a4485e1e70de70ed7d677"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c50659733df2acac1580d209db8e97f" id="r_a8c50659733df2acac1580d209db8e97f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8c50659733df2acac1580d209db8e97f">oled_init</a> ()</td></tr>
<tr class="separator:a8c50659733df2acac1580d209db8e97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77605eb86157d0b0194fc72a25738a22" id="r_a77605eb86157d0b0194fc72a25738a22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a77605eb86157d0b0194fc72a25738a22">displayInputSpeed</a> (int y_pos)</td></tr>
<tr class="separator:a77605eb86157d0b0194fc72a25738a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea220abd9e6d180734b3b2bc0750f89" id="r_a9ea220abd9e6d180734b3b2bc0750f89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a9ea220abd9e6d180734b3b2bc0750f89">displayBat</a> (int y_pos)</td></tr>
<tr class="separator:a9ea220abd9e6d180734b3b2bc0750f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59ebf0340587075ef7d1fc943c78408" id="r_ac59ebf0340587075ef7d1fc943c78408"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac59ebf0340587075ef7d1fc943c78408">displayState</a> ()</td></tr>
<tr class="separator:ac59ebf0340587075ef7d1fc943c78408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c42980e08859e81090559d51a512b0" id="r_ac7c42980e08859e81090559d51a512b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac7c42980e08859e81090559d51a512b0">handleButton</a> ()</td></tr>
<tr class="separator:ac7c42980e08859e81090559d51a512b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e93a7266c27d56845381cb2076d391" id="r_ae2e93a7266c27d56845381cb2076d391"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae2e93a7266c27d56845381cb2076d391">handleRelease</a> ()</td></tr>
<tr class="separator:ae2e93a7266c27d56845381cb2076d391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acf41dad5576bfc9ced017baa2bf524" id="r_a4acf41dad5576bfc9ced017baa2bf524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4acf41dad5576bfc9ced017baa2bf524">handleMSCButton</a> ()</td></tr>
<tr class="separator:a4acf41dad5576bfc9ced017baa2bf524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab132489f70371e1c876ba54e9d7011" id="r_a5ab132489f70371e1c876ba54e9d7011"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5ab132489f70371e1c876ba54e9d7011">createDataFile</a> ()</td></tr>
<tr class="separator:a5ab132489f70371e1c876ba54e9d7011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e37f59651692a7089d2b8ed312c7d3" id="r_af7e37f59651692a7089d2b8ed312c7d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af7e37f59651692a7089d2b8ed312c7d3">resetFiltering</a> ()</td></tr>
<tr class="separator:af7e37f59651692a7089d2b8ed312c7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b5f26e2ea4e4c247dc26ea786e9b11" id="r_a14b5f26e2ea4e4c247dc26ea786e9b11"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a14b5f26e2ea4e4c247dc26ea786e9b11">getBatLevel</a> ()</td></tr>
<tr class="separator:a14b5f26e2ea4e4c247dc26ea786e9b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70ff0abbdc7d6bd7b82553d2037889fd" id="r_a70ff0abbdc7d6bd7b82553d2037889fd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a70ff0abbdc7d6bd7b82553d2037889fd">getInputSpeed</a> ()</td></tr>
<tr class="separator:a70ff0abbdc7d6bd7b82553d2037889fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e74d3c55ba6d356cd90823775f2d664" id="r_a5e74d3c55ba6d356cd90823775f2d664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5e74d3c55ba6d356cd90823775f2d664">getRPM</a> ()</td></tr>
<tr class="separator:a5e74d3c55ba6d356cd90823775f2d664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b614e0add50e5ae36d208fe910f90c6" id="r_a0b614e0add50e5ae36d208fe910f90c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0b614e0add50e5ae36d208fe910f90c6">enableMSC</a> ()</td></tr>
<tr class="separator:a0b614e0add50e5ae36d208fe910f90c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae995a6024db644fcec928354bc4f5f67" id="r_ae995a6024db644fcec928354bc4f5f67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae995a6024db644fcec928354bc4f5f67">disableMSC</a> ()</td></tr>
<tr class="separator:ae995a6024db644fcec928354bc4f5f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64461563174d034ff94d443f2c172622" id="r_a64461563174d034ff94d443f2c172622"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a64461563174d034ff94d443f2c172622">testingSuite</a> ()</td></tr>
<tr class="separator:a64461563174d034ff94d443f2c172622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4765141d8281f1873714923a260f93fc" id="r_a4765141d8281f1873714923a260f93fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4765141d8281f1873714923a260f93fc">testMSC</a> ()</td></tr>
<tr class="separator:a4765141d8281f1873714923a260f93fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada5a15c76153823533f203632f7d1d62" id="r_ada5a15c76153823533f203632f7d1d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ada5a15c76153823533f203632f7d1d62">testSD</a> ()</td></tr>
<tr class="separator:ada5a15c76153823533f203632f7d1d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ec483eb29785695a1b3b255b3dc8b9" id="r_a68ec483eb29785695a1b3b255b3dc8b9"><td class="memItemLeft" align="right" valign="top"><a id="a68ec483eb29785695a1b3b255b3dc8b9" name="a68ec483eb29785695a1b3b255b3dc8b9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>testPins</b> ()</td></tr>
<tr class="separator:a68ec483eb29785695a1b3b255b3dc8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70581e416f69b14c5a0bc5e4918b479" id="r_af70581e416f69b14c5a0bc5e4918b479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af70581e416f69b14c5a0bc5e4918b479">gpio_ISR</a> (uint gpio, uint32_t events)</td></tr>
<tr class="separator:af70581e416f69b14c5a0bc5e4918b479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a92c826e08ae550b58a56ea3f55c49311" id="r_a92c826e08ae550b58a56ea3f55c49311"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a> = 50</td></tr>
<tr class="memdesc:a92c826e08ae550b58a56ea3f55c49311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1)  <br /></td></tr>
<tr class="separator:a92c826e08ae550b58a56ea3f55c49311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5988591b58aabf7567019b975da7e7aa" id="r_a5988591b58aabf7567019b975da7e7aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a> = 0</td></tr>
<tr class="memdesc:a5988591b58aabf7567019b975da7e7aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1)  <br /></td></tr>
<tr class="separator:a5988591b58aabf7567019b975da7e7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03de839a9debec4f2265023b765444ad" id="r_a03de839a9debec4f2265023b765444ad"><td class="memItemLeft" align="right" valign="top">ssd1306_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a03de839a9debec4f2265023b765444ad">oled</a></td></tr>
<tr class="separator:a03de839a9debec4f2265023b765444ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fef9435f436bfd601806a7a0bef54bb" id="r_a1fef9435f436bfd601806a7a0bef54bb"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a1fef9435f436bfd601806a7a0bef54bb">speed_lvl</a> = 0</td></tr>
<tr class="separator:a1fef9435f436bfd601806a7a0bef54bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04968100075345ffc60b9ffe62b4c9c" id="r_af04968100075345ffc60b9ffe62b4c9c"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af04968100075345ffc60b9ffe62b4c9c">temp_speed</a> = 0</td></tr>
<tr class="separator:af04968100075345ffc60b9ffe62b4c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2ce6f76284e4e63fab85506c67907b" id="r_a3e2ce6f76284e4e63fab85506c67907b"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a3e2ce6f76284e4e63fab85506c67907b">bat_per</a> = 0</td></tr>
<tr class="separator:a3e2ce6f76284e4e63fab85506c67907b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43c3812e6d13e0518d9f8b8f463ffcf" id="r_ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 0</td></tr>
<tr class="separator:ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6f130727d2275823bd3040581e801a5" id="r_ac6f130727d2275823bd3040581e801a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac6f130727d2275823bd3040581e801a5">numPulses</a> = 0</td></tr>
<tr class="separator:ac6f130727d2275823bd3040581e801a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f37897ed52586bce688beb5be8f50e" id="r_ae1f37897ed52586bce688beb5be8f50e"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae1f37897ed52586bce688beb5be8f50e">now</a> = get_absolute_time()</td></tr>
<tr class="separator:ae1f37897ed52586bce688beb5be8f50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597777ddfcfc40b6553d91789dfd343f" id="r_a597777ddfcfc40b6553d91789dfd343f"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a597777ddfcfc40b6553d91789dfd343f">prevTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a597777ddfcfc40b6553d91789dfd343f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a5c46842ef8862d2ccd9e7bd3aec63" id="r_ad5a5c46842ef8862d2ccd9e7bd3aec63"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5a5c46842ef8862d2ccd9e7bd3aec63">pressTime</a> = get_absolute_time()</td></tr>
<tr class="separator:ad5a5c46842ef8862d2ccd9e7bd3aec63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029fea14c173ec8d34f33c8594b95db0" id="r_a029fea14c173ec8d34f33c8594b95db0"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a029fea14c173ec8d34f33c8594b95db0">pressedTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a029fea14c173ec8d34f33c8594b95db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6564e8259eebddb283f25451cd7fd364" id="r_a6564e8259eebddb283f25451cd7fd364"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6564e8259eebddb283f25451cd7fd364">mscPressTime</a> = get_absolute_time()</td></tr>
<tr class="separator:a6564e8259eebddb283f25451cd7fd364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e39b399c2a11f0d76e42ab8241a910" id="r_a25e39b399c2a11f0d76e42ab8241a910"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a25e39b399c2a11f0d76e42ab8241a910">rpm</a> = 0</td></tr>
<tr class="separator:a25e39b399c2a11f0d76e42ab8241a910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d2f7d0c2e8d8f3a6428b8225202ea3" id="r_aa7d2f7d0c2e8d8f3a6428b8225202ea3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aa7d2f7d0c2e8d8f3a6428b8225202ea3">current_mA</a> = 0</td></tr>
<tr class="separator:aa7d2f7d0c2e8d8f3a6428b8225202ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0952eff2667e5af2b307ba4f6d0b06b" id="r_ad0952eff2667e5af2b307ba4f6d0b06b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad0952eff2667e5af2b307ba4f6d0b06b">force</a> = 0</td></tr>
<tr class="separator:ad0952eff2667e5af2b307ba4f6d0b06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d4a56445e448ecc3a9c7143fe0c832" id="r_a23d4a56445e448ecc3a9c7143fe0c832"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a23d4a56445e448ecc3a9c7143fe0c832">displacement</a> = 0</td></tr>
<tr class="separator:a23d4a56445e448ecc3a9c7143fe0c832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f7a9c2f3b2608343ddf46bcfcac2c2" id="r_ad5f7a9c2f3b2608343ddf46bcfcac2c2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5f7a9c2f3b2608343ddf46bcfcac2c2">lp_current</a> = 0</td></tr>
<tr class="separator:ad5f7a9c2f3b2608343ddf46bcfcac2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37794ae42b6a8116fa24f997b634dba9" id="r_a37794ae42b6a8116fa24f997b634dba9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a37794ae42b6a8116fa24f997b634dba9">MAF</a> [<a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>] = {0}</td></tr>
<tr class="separator:a37794ae42b6a8116fa24f997b634dba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a891ae364a9c7853fd67cdb10cfc870c8" id="r_a891ae364a9c7853fd67cdb10cfc870c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a891ae364a9c7853fd67cdb10cfc870c8">MAF_counter</a> = 0</td></tr>
<tr class="separator:a891ae364a9c7853fd67cdb10cfc870c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef72076a36ad8bc9405e594d784e040b" id="r_aef72076a36ad8bc9405e594d784e040b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aef72076a36ad8bc9405e594d784e040b">MAF_sum</a> = 0</td></tr>
<tr class="separator:aef72076a36ad8bc9405e594d784e040b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7597a58fd0a9415759b81dffee974e6" id="r_ac7597a58fd0a9415759b81dffee974e6"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a></td></tr>
<tr class="memdesc:ac7597a58fd0a9415759b81dffee974e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global slice value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to the organization of PWM configurations by clock. Please see RP2040 documentation.  <br /></td></tr>
<tr class="separator:ac7597a58fd0a9415759b81dffee974e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23777d4d3d69af11916d27e48261cfb1" id="r_a23777d4d3d69af11916d27e48261cfb1"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a></td></tr>
<tr class="memdesc:a23777d4d3d69af11916d27e48261cfb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global channel value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to PWM output pin itself. Please see RP2040 documentation.  <br /></td></tr>
<tr class="separator:a23777d4d3d69af11916d27e48261cfb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0799c2e54cccc1be7e9b4a1a9fa780c" id="r_ac0799c2e54cccc1be7e9b4a1a9fa780c"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac0799c2e54cccc1be7e9b4a1a9fa780c">prevBug</a> = get_absolute_time()</td></tr>
<tr class="separator:ac0799c2e54cccc1be7e9b4a1a9fa780c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21215ef0aca60874669e1e2f7425e70c" id="r_a21215ef0aca60874669e1e2f7425e70c"><td class="memItemLeft" align="right" valign="top">absolute_time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a21215ef0aca60874669e1e2f7425e70c">currBug</a> = get_absolute_time()</td></tr>
<tr class="separator:a21215ef0aca60874669e1e2f7425e70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d24a7e8ef01eb2683901eb25396beed" id="r_a0d24a7e8ef01eb2683901eb25396beed"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0d24a7e8ef01eb2683901eb25396beed">motor_flag</a> = false</td></tr>
<tr class="separator:a0d24a7e8ef01eb2683901eb25396beed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae964ac24618b7c245998d37cdd06acd3" id="r_ae964ac24618b7c245998d37cdd06acd3"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae964ac24618b7c245998d37cdd06acd3">button_press_flag</a> = false</td></tr>
<tr class="separator:ae964ac24618b7c245998d37cdd06acd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a548278ea37054952a50f6ef9ce6413ce" id="r_a548278ea37054952a50f6ef9ce6413ce"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a548278ea37054952a50f6ef9ce6413ce">button_release_flag</a> = false</td></tr>
<tr class="separator:a548278ea37054952a50f6ef9ce6413ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268172ec6be901b1e9c5f4212cee806b" id="r_a268172ec6be901b1e9c5f4212cee806b"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a268172ec6be901b1e9c5f4212cee806b">button_msc_flag</a> = false</td></tr>
<tr class="separator:a268172ec6be901b1e9c5f4212cee806b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5af4859884ea5c925366abfbdb0ef8f" id="r_ad5af4859884ea5c925366abfbdb0ef8f"><td class="memItemLeft" align="right" valign="top">FATFS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad5af4859884ea5c925366abfbdb0ef8f">filesys</a></td></tr>
<tr class="separator:ad5af4859884ea5c925366abfbdb0ef8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be63952e3c9cb0f46f9e592b3c78714" id="r_a4be63952e3c9cb0f46f9e592b3c78714"><td class="memItemLeft" align="right" valign="top">FIL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4be63952e3c9cb0f46f9e592b3c78714">fil</a></td></tr>
<tr class="separator:a4be63952e3c9cb0f46f9e592b3c78714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e3ee7820c8f54b680f492ef5c0d1ed" id="r_ab1e3ee7820c8f54b680f492ef5c0d1ed"><td class="memItemLeft" align="right" valign="top">TCHAR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ab1e3ee7820c8f54b680f492ef5c0d1ed">filename</a> [20] = &quot;data0.csv\0&quot;</td></tr>
<tr class="separator:ab1e3ee7820c8f54b680f492ef5c0d1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434ef2e67e7d14c2f6a753c08a5eae49" id="r_a434ef2e67e7d14c2f6a753c08a5eae49"><td class="memItemLeft" align="right" valign="top">enum states state&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a434ef2e67e7d14c2f6a753c08a5eae49">nextState</a></td></tr>
<tr class="separator:a434ef2e67e7d14c2f6a753c08a5eae49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd9653a1b3ee09644723877d2aa36e1" id="r_accd9653a1b3ee09644723877d2aa36e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#accd9653a1b3ee09644723877d2aa36e1">validPress</a> = false</td></tr>
<tr class="separator:accd9653a1b3ee09644723877d2aa36e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main file for the smart biopsy needle. It handles the high level operation of the state machine, sensors, motors, and display. If onboarding, LOOK AT THIS FILE FIRST. Close all pragma regions and just try to understand the main function. </p>
<dl class="section author"><dt>Author</dt><dd>Thomas Chang </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-04-30</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9400840ebc875d8e59c484e65a643b77" name="a9400840ebc875d8e59c484e65a643b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9400840ebc875d8e59c484e65a643b77">&#9670;&#160;</a></span>LP_ALPHA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LP_ALPHA&#160;&#160;&#160;0.1f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Smoothing factor for LP Filter. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00025">25</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a6af9f0d27369b3f4a063f61c51c198f3" name="a6af9f0d27369b3f4a063f61c51c198f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af9f0d27369b3f4a063f61c51c198f3">&#9670;&#160;</a></span>MAF_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAF_SZ&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Window size for Moving Average Filter. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00024">24</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa19be6305a5a4485e1e70de70ed7d677" name="aa19be6305a5a4485e1e70de70ed7d677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa19be6305a5a4485e1e70de70ed7d677">&#9670;&#160;</a></span>states</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum states</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00100">100</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>            {</div>
<div class="line"><span class="lineno">  101</span>    WAIT,</div>
<div class="line"><span class="lineno">  102</span>    STANDBY,</div>
<div class="line"><span class="lineno">  103</span>    CUTTING,</div>
<div class="line"><span class="lineno">  104</span>    REMOVAL,</div>
<div class="line"><span class="lineno">  105</span>    EXITING,</div>
<div class="line"><span class="lineno">  106</span>    FINISH,</div>
<div class="line"><span class="lineno">  107</span>    ZERO</div>
<div class="line"><span class="lineno">  108</span>};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5ab132489f70371e1c876ba54e9d7011" name="a5ab132489f70371e1c876ba54e9d7011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ab132489f70371e1c876ba54e9d7011">&#9670;&#160;</a></span>createDataFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createDataFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00314">314</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>                      {</div>
<div class="line"><span class="lineno">  315</span>    </div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordtype">int</span> fileNum = 0;</div>
<div class="line"><span class="lineno">  317</span>    FRESULT file_created = f_open(&amp;fil, filename, FA_CREATE_NEW | FA_WRITE);</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">while</span> (file_created == FR_EXIST) {</div>
<div class="line"><span class="lineno">  319</span>        fileNum++;</div>
<div class="line"><span class="lineno">  320</span>        sprintf(filename, <span class="stringliteral">&quot;data%d.csv&quot;</span>, fileNum);</div>
<div class="line"><span class="lineno">  321</span>        file_created = f_open(&amp;fil, filename, FA_CREATE_NEW | FA_WRITE);</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    <span class="comment">// Print header of file</span></div>
<div class="line"><span class="lineno">  325</span>    f_printf(&amp;fil, <span class="stringliteral">&quot;State, Time(ms), Current(mA), CurrentLP(mA), CurrentMAF(mA), RPM, Displacement(mm), Force(N)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  326</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae995a6024db644fcec928354bc4f5f67" name="ae995a6024db644fcec928354bc4f5f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae995a6024db644fcec928354bc4f5f67">&#9670;&#160;</a></span>disableMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00504">504</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  504</span>                  {</div>
<div class="line"><span class="lineno">  505</span>    tud_disconnect();</div>
<div class="line"><span class="lineno">  506</span>    f_mount(&amp;filesys, <span class="stringliteral">&quot;&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  507</span>    tud_deinit(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  508</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ea220abd9e6d180734b3b2bc0750f89" name="a9ea220abd9e6d180734b3b2bc0750f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea220abd9e6d180734b3b2bc0750f89">&#9670;&#160;</a></span>displayBat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayBat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00386">386</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  386</span>                           {</div>
<div class="line"><span class="lineno">  387</span>    std::string temp = to_string(bat_per) + <span class="stringliteral">&quot;%&quot;</span>;</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordtype">int</span> x_pos = 110;</div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">if</span> (bat_per == 0) {</div>
<div class="line"><span class="lineno">  390</span>        ssd1306_draw_string(&amp;oled, 110, y_pos, 1, <span class="stringliteral">&quot;BAT&quot;</span>);</div>
<div class="line"><span class="lineno">  391</span>        ssd1306_draw_string(&amp;oled, 116, y_pos + 8, 1, <span class="stringliteral">&quot;LO&quot;</span>);</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  393</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bat_per &lt; 10) {</div>
<div class="line"><span class="lineno">  394</span>        x_pos = 116;</div>
<div class="line"><span class="lineno">  395</span>    }</div>
<div class="line"><span class="lineno">  396</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* bat = temp.c_str();</div>
<div class="line"><span class="lineno">  397</span>    ssd1306_draw_string(&amp;oled, 110, y_pos, 1, <span class="stringliteral">&quot;BAT&quot;</span>);</div>
<div class="line"><span class="lineno">  398</span>    ssd1306_draw_string(&amp;oled, x_pos, y_pos + 8, 1, bat);</div>
<div class="line"><span class="lineno">  399</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a77605eb86157d0b0194fc72a25738a22" name="a77605eb86157d0b0194fc72a25738a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77605eb86157d0b0194fc72a25738a22">&#9670;&#160;</a></span>displayInputSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayInputSpeed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00328">328</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  328</span>                                  {</div>
<div class="line"><span class="lineno">  329</span>    std::string temp = <span class="stringliteral">&quot;INPUT SPEED: [ &quot;</span> + to_string(temp_speed) + <span class="stringliteral">&quot;% ]&quot;</span>;</div>
<div class="line"><span class="lineno">  330</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* in_speed = temp.c_str();</div>
<div class="line"><span class="lineno">  331</span>    ssd1306_draw_string(&amp;oled, 0, y_pos, 1, in_speed);</div>
<div class="line"><span class="lineno">  332</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac59ebf0340587075ef7d1fc943c78408" name="ac59ebf0340587075ef7d1fc943c78408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59ebf0340587075ef7d1fc943c78408">&#9670;&#160;</a></span>displayState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00334">334</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  334</span>                    {</div>
<div class="line"><span class="lineno">  335</span>    ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">switch</span>(state) {</div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordflow">case</span> STANDBY:</div>
<div class="line"><span class="lineno">  338</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;STANDBY&quot;</span>);</div>
<div class="line"><span class="lineno">  339</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  340</span>                ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ PRESS MSC  : LOGS ]&quot;</span>);</div>
<div class="line"><span class="lineno">  341</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  342</span>                displayInputSpeed(50);</div>
<div class="line"><span class="lineno">  343</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  344</span>            </div>
<div class="line"><span class="lineno">  345</span>            <span class="keywordflow">case</span> CUTTING:</div>
<div class="line"><span class="lineno">  346</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;CUTTING&quot;</span>);</div>
<div class="line"><span class="lineno">  347</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  348</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  349</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, rpm, <span class="stringliteral">&quot;SPD (RPM) : &quot;</span>);</div>
<div class="line"><span class="lineno">  350</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 40, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  351</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 50, force, <span class="stringliteral">&quot;FRC (N)   : &quot;</span>);</div>
<div class="line"><span class="lineno">  352</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  353</span>            </div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordflow">case</span> REMOVAL:</div>
<div class="line"><span class="lineno">  355</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;REMOVAL&quot;</span>);</div>
<div class="line"><span class="lineno">  356</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  357</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>                displayInputSpeed(50);</div>
<div class="line"><span class="lineno">  359</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  360</span>            </div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">case</span> EXITING:</div>
<div class="line"><span class="lineno">  362</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;EXITING&quot;</span>);</div>
<div class="line"><span class="lineno">  363</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  364</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 20, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  365</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, rpm, <span class="stringliteral">&quot;SPD (RPM) : &quot;</span>);</div>
<div class="line"><span class="lineno">  366</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 40, displacement, <span class="stringliteral">&quot;POS (mm)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 50, force, <span class="stringliteral">&quot;FRC (N)   : &quot;</span>);</div>
<div class="line"><span class="lineno">  368</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  369</span>            </div>
<div class="line"><span class="lineno">  370</span>            <span class="keywordflow">case</span> FINISH: <span class="comment">// For debugging purposes.</span></div>
<div class="line"><span class="lineno">  371</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;COMPLETE&quot;</span>);</div>
<div class="line"><span class="lineno">  372</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  373</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  374</span>                ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ PRESS MSC  : LOGS ]&quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  376</span>            <span class="keywordflow">case</span> ZERO:</div>
<div class="line"><span class="lineno">  377</span>                ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;ZERO&quot;</span>);</div>
<div class="line"><span class="lineno">  378</span>                displayBat(0);</div>
<div class="line"><span class="lineno">  379</span>                ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;Resetting to origin&quot;</span>);</div>
<div class="line"><span class="lineno">  380</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a>(&amp;oled, 30, current_mA, <span class="stringliteral">&quot;CUR (mA)  : &quot;</span>);</div>
<div class="line"><span class="lineno">  381</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  382</span>        }</div>
<div class="line"><span class="lineno">  383</span>    ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  384</span>}</div>
<div class="ttc" id="antm__helpers_8h_html_a42ebef78c974c5dd10ee53b6bea5ac07"><div class="ttname"><a href="ntm__helpers_8h.html#a42ebef78c974c5dd10ee53b6bea5ac07">displayData</a></div><div class="ttdeci">void displayData(ssd1306_t *screen, int y_pos, float data, std::string info)</div><div class="ttdoc">Helper function used to abstract how sensor data is shown on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00072">ntm_helpers.cpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b614e0add50e5ae36d208fe910f90c6" name="a0b614e0add50e5ae36d208fe910f90c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b614e0add50e5ae36d208fe910f90c6">&#9670;&#160;</a></span>enableMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00499">499</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>                 {</div>
<div class="line"><span class="lineno">  500</span>    f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  501</span>    tud_task();</div>
<div class="line"><span class="lineno">  502</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14b5f26e2ea4e4c247dc26ea786e9b11" name="a14b5f26e2ea4e4c247dc26ea786e9b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b5f26e2ea4e4c247dc26ea786e9b11">&#9670;&#160;</a></span>getBatLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float getBatLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00401">401</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  401</span>                    {</div>
<div class="line"><span class="lineno">  402</span>    adc_select_input(0);</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordtype">long</span> bat = adc_read();</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; potIterations; i++) {</div>
<div class="line"><span class="lineno">  405</span>        bat += adc_read();</div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span>    bat /= 1.0 * potIterations;</div>
<div class="line"><span class="lineno">  408</span>    bat = <a class="code hl_define" href="group__BatteryMacros.html#ga24c290b5fa8c0bb248fc15b5bcf873d7">NTM_MAX</a>(bat, <a class="code hl_define" href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a>);</div>
<div class="line"><span class="lineno">  409</span>    bat = <a class="code hl_define" href="group__BatteryMacros.html#ga9a187ecf82734a12819e1283bcb69bab">NTM_MIN</a>(bat, <a class="code hl_define" href="group__BatteryMacros.html#ga7703a5d829fb6d1223ad111a9474fa9b">BAT_MAX_ADC</a>);</div>
<div class="line"><span class="lineno">  410</span>    bat = (bat - <a class="code hl_define" href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a>) * <a class="code hl_define" href="group__BatteryMacros.html#ga4ea44361cc7ac80f146feb2806720fda">BAT_ADC_PER</a>;</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">return</span> bat;</div>
<div class="line"><span class="lineno">  412</span>}</div>
<div class="ttc" id="agroup__BatteryMacros_html_ga24c290b5fa8c0bb248fc15b5bcf873d7"><div class="ttname"><a href="group__BatteryMacros.html#ga24c290b5fa8c0bb248fc15b5bcf873d7">NTM_MAX</a></div><div class="ttdeci">#define NTM_MAX(A, B)</div><div class="ttdoc">Calculates the bigger value between A and B using operator. Essentially: if (A) &gt;= (B) return A....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00056">config.h:56</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga4ea44361cc7ac80f146feb2806720fda"><div class="ttname"><a href="group__BatteryMacros.html#ga4ea44361cc7ac80f146feb2806720fda">BAT_ADC_PER</a></div><div class="ttdeci">#define BAT_ADC_PER</div><div class="ttdoc">Looks strange out of context. Used to calculate the batter capacity i.e. (Current Battery Value - BAT...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00082">config.h:82</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga7703a5d829fb6d1223ad111a9474fa9b"><div class="ttname"><a href="group__BatteryMacros.html#ga7703a5d829fb6d1223ad111a9474fa9b">BAT_MAX_ADC</a></div><div class="ttdeci">#define BAT_MAX_ADC</div><div class="ttdoc">Represents the battery's max capacity from the perspective of the microcontroller....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00069">config.h:69</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_ga9a187ecf82734a12819e1283bcb69bab"><div class="ttname"><a href="group__BatteryMacros.html#ga9a187ecf82734a12819e1283bcb69bab">NTM_MIN</a></div><div class="ttdeci">#define NTM_MIN(A, B)</div><div class="ttdoc">Calculates the smaller value between A and B using operator. Essentially: if (A) &lt;= (B) return A....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00059">config.h:59</a></div></div>
<div class="ttc" id="agroup__BatteryMacros_html_gad380f4a571d5444566336f067dfb7b01"><div class="ttname"><a href="group__BatteryMacros.html#gad380f4a571d5444566336f067dfb7b01">BAT_MIN_ADC</a></div><div class="ttdeci">#define BAT_MIN_ADC</div><div class="ttdoc">Represents the battery's min capacity from the perspective of the microcontroller....</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00079">config.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70ff0abbdc7d6bd7b82553d2037889fd" name="a70ff0abbdc7d6bd7b82553d2037889fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70ff0abbdc7d6bd7b82553d2037889fd">&#9670;&#160;</a></span>getInputSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long getInputSpeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00414">414</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  414</span>                     {</div>
<div class="line"><span class="lineno">  415</span>    adc_select_input(3);</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordtype">long</span> val = 0;</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; potIterations; i++) {</div>
<div class="line"><span class="lineno">  418</span>        val += adc_read();</div>
<div class="line"><span class="lineno">  419</span>    }</div>
<div class="line"><span class="lineno">  420</span>    </div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">return</span> long(0.0243 * (val * 1.0 / potIterations) + 1);</div>
<div class="line"><span class="lineno">  422</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e74d3c55ba6d356cd90823775f2d664" name="a5e74d3c55ba6d356cd90823775f2d664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e74d3c55ba6d356cd90823775f2d664">&#9670;&#160;</a></span>getRPM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRPM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00424">424</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  424</span>              {</div>
<div class="line"><span class="lineno">  425</span>    <span class="keyword">static</span> absolute_time_t prevRPMTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  426</span>    absolute_time_t currRPMTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">if</span> (absolute_time_diff_us(prevRPMTime, currRPMTime) &gt;= <a class="code hl_define" href="group__BatteryMacros.html#ga81b58a672e9a97383f06a46f89660b1d">SEC_US</a>) {</div>
<div class="line"><span class="lineno">  429</span>        rpm = (numPulses/12.0f/34.014f) * 60.0f;</div>
<div class="line"><span class="lineno">  430</span>        numPulses = 0;</div>
<div class="line"><span class="lineno">  431</span>        prevRPMTime = currRPMTime;</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="line"><span class="lineno">  433</span>}</div>
<div class="ttc" id="agroup__BatteryMacros_html_ga81b58a672e9a97383f06a46f89660b1d"><div class="ttname"><a href="group__BatteryMacros.html#ga81b58a672e9a97383f06a46f89660b1d">SEC_US</a></div><div class="ttdeci">#define SEC_US</div><div class="ttdoc">1 Second in microseconds.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00085">config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af70581e416f69b14c5a0bc5e4918b479" name="af70581e416f69b14c5a0bc5e4918b479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70581e416f69b14c5a0bc5e4918b479">&#9670;&#160;</a></span>gpio_ISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpio_ISR </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>gpio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00112">112</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                          {</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> (gpio == motorA_out) {</div>
<div class="line"><span class="lineno">  114</span>        numPulses++;</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> (gpio_get(MOTOR_DIR) == 0) {</div>
<div class="line"><span class="lineno">  116</span>                count--;</div>
<div class="line"><span class="lineno">  117</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  118</span>                count++;</div>
<div class="line"><span class="lineno">  119</span>            }</div>
<div class="line"><span class="lineno">  120</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio == state_input) {</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  122</span>            pressTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  123</span>            button_press_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  124</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio_get(state_input) == 0) {</div>
<div class="line"><span class="lineno">  125</span>            button_release_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span>        </div>
<div class="line"><span class="lineno">  128</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gpio == msc_input) {</div>
<div class="line"><span class="lineno">  129</span>        mscPressTime = get_absolute_time();</div>
<div class="line"><span class="lineno">  130</span>        button_msc_flag = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7c42980e08859e81090559d51a512b0" name="ac7c42980e08859e81090559d51a512b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c42980e08859e81090559d51a512b0">&#9670;&#160;</a></span>handleButton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleButton </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00437">437</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  437</span>                    {</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> (button_press_flag) {</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">if</span> (absolute_time_diff_us(pressTime, now) &gt;= debounce_us) {</div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  441</span>                validPress = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  442</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  443</span>                button_press_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  444</span>            }</div>
<div class="line"><span class="lineno">  445</span>        }</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">if</span> (validPress) {</div>
<div class="line"><span class="lineno">  448</span>            <span class="keywordflow">if</span> (absolute_time_diff_us(pressTime, now) &gt;= <a class="code hl_define" href="config_8h.html#ac6f3299722b682ead61165a15c392922">hold_us</a>) {</div>
<div class="line"><span class="lineno">  449</span>                state = ZERO;</div>
<div class="line"><span class="lineno">  450</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  451</span>                gpio_put(MOTOR_DIR, 0);</div>
<div class="line"><span class="lineno">  452</span>                pwm_set_chan_level(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, <a class="code hl_variable" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a>, 255);</div>
<div class="line"><span class="lineno">  453</span>                displayState();</div>
<div class="line"><span class="lineno">  454</span>                sleep_ms(<a class="code hl_define" href="config_8h.html#afce5aaf1a0caf368eaf0db8926a30960">SPIKE_TIME</a>);</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>                button_press_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  457</span>                validPress = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  458</span>            } </div>
<div class="line"><span class="lineno">  459</span>        }</div>
<div class="line"><span class="lineno">  460</span>    }</div>
<div class="line"><span class="lineno">  461</span>}</div>
<div class="ttc" id="aconfig_8h_html_ac6f3299722b682ead61165a15c392922"><div class="ttname"><a href="config_8h.html#ac6f3299722b682ead61165a15c392922">hold_us</a></div><div class="ttdeci">#define hold_us</div><div class="ttdoc">Hold [STATE] for 3 sec to enter ZERO state.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00021">config.h:21</a></div></div>
<div class="ttc" id="aconfig_8h_html_afce5aaf1a0caf368eaf0db8926a30960"><div class="ttname"><a href="config_8h.html#afce5aaf1a0caf368eaf0db8926a30960">SPIKE_TIME</a></div><div class="ttdeci">#define SPIKE_TIME</div><div class="ttdoc">Time in ms used to avoid measuring current spikes during the ZERO state. Without this the ZERO state ...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00027">config.h:27</a></div></div>
<div class="ttc" id="amain_8cpp_html_a23777d4d3d69af11916d27e48261cfb1"><div class="ttname"><a href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a></div><div class="ttdeci">uint channel</div><div class="ttdoc">Global channel value for the PWM module. Automatically determined by chosen pin at runtime....</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00024">ntm_helpers.cpp:24</a></div></div>
<div class="ttc" id="amain_8cpp_html_ac7597a58fd0a9415759b81dffee974e6"><div class="ttname"><a href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a></div><div class="ttdeci">uint slice</div><div class="ttdoc">Global slice value for the PWM module. Automatically determined by chosen pin at runtime....</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00018">ntm_helpers.cpp:18</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4acf41dad5576bfc9ced017baa2bf524" name="a4acf41dad5576bfc9ced017baa2bf524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4acf41dad5576bfc9ced017baa2bf524">&#9670;&#160;</a></span>handleMSCButton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleMSCButton </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00476">476</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  476</span>                       {</div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">if</span> (button_msc_flag) {</div>
<div class="line"><span class="lineno">  478</span>        <span class="keywordflow">if</span> (absolute_time_diff_us(mscPressTime, now) &gt;= debounce_us) {</div>
<div class="line"><span class="lineno">  479</span>            <span class="keywordflow">if</span> (state == STANDBY || state == FINISH) {</div>
<div class="line"><span class="lineno">  480</span>                <span class="keywordflow">if</span> (gpio_get(state_input) == 0) {</div>
<div class="line"><span class="lineno">  481</span>                    watchdog_enable(1, 1);</div>
<div class="line"><span class="lineno">  482</span>                }</div>
<div class="line"><span class="lineno">  483</span>            }</div>
<div class="line"><span class="lineno">  484</span>            button_msc_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  485</span>        }</div>
<div class="line"><span class="lineno">  486</span>    }</div>
<div class="line"><span class="lineno">  487</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2e93a7266c27d56845381cb2076d391" name="ae2e93a7266c27d56845381cb2076d391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e93a7266c27d56845381cb2076d391">&#9670;&#160;</a></span>handleRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleRelease </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00463">463</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  463</span>                     {</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">if</span> (button_release_flag) {</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">if</span> (validPress) {</div>
<div class="line"><span class="lineno">  466</span>            state = nextState;</div>
<div class="line"><span class="lineno">  467</span>            <span class="keywordflow">if</span> (state == CUTTING) {</div>
<div class="line"><span class="lineno">  468</span>                createDataFile();</div>
<div class="line"><span class="lineno">  469</span>            }</div>
<div class="line"><span class="lineno">  470</span>            validPress = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  471</span>        }</div>
<div class="line"><span class="lineno">  472</span>        button_release_flag = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  473</span>    }</div>
<div class="line"><span class="lineno">  474</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00134">134</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>           {</div>
<div class="line"><span class="lineno">  135</span><span class="preprocessor">    #pragma region TESTING</span></div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    <span class="comment">//testingSuite();</span></div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">//testMSC();</span></div>
<div class="line"><span class="lineno">  139</span>    <span class="comment">//testSD();</span></div>
<div class="line"><span class="lineno">  140</span>    <span class="comment">//testSPI();</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span><span class="preprocessor">    #pragma endregion</span></div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="comment">// MSC: Initialize board</span></div>
<div class="line"><span class="lineno">  145</span>    board_init();</div>
<div class="line"><span class="lineno">  146</span>    tud_init(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">// Initialize serial port and wait for serial monitor</span></div>
<div class="line"><span class="lineno">  149</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  150</span>    gpio_init(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  151</span>    gpio_put(MOTOR_PWM, 0);</div>
<div class="line"><span class="lineno">  152</span>    sleep_ms(1000);</div>
<div class="line"><span class="lineno">  153</span>    </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// ==== General Initialization ==== //</span></div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_function" href="ntm__helpers_8h.html#a8c6d7458362f0a1d72f048e5c28dafc9">board_gpio_init</a>();</div>
<div class="line"><span class="lineno">  156</span>    bat_per = getBatLevel();</div>
<div class="line"><span class="lineno">  157</span>    oled_init();</div>
<div class="line"><span class="lineno">  158</span>    state = WAIT;</div>
<div class="line"><span class="lineno">  159</span>    nextState = STANDBY;</div>
<div class="line"><span class="lineno">  160</span>    INA219 ina219(MY_I2C, INA219_ADDR);</div>
<div class="line"><span class="lineno">  161</span>    ina219.calibrate(0.1, 3.2);</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="comment">// ==== Interrupts ==== //</span></div>
<div class="line"><span class="lineno">  164</span>    gpio_set_irq_enabled_with_callback(motorA_out, GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>, &amp;gpio_ISR);</div>
<div class="line"><span class="lineno">  165</span>    gpio_set_irq_enabled(state_input, GPIO_IRQ_EDGE_RISE | GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  166</span>    gpio_set_irq_enabled(msc_input, GPIO_IRQ_EDGE_FALL, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  169</span>        now = get_absolute_time();</div>
<div class="line"><span class="lineno">  170</span>        int64_t time_ms = to_ms_since_boot(now);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        handleRelease();</div>
<div class="line"><span class="lineno">  173</span>        handleButton();</div>
<div class="line"><span class="lineno">  174</span>        handleMSCButton();</div>
<div class="line"><span class="lineno">  175</span>        getRPM();</div>
<div class="line"><span class="lineno">  176</span>        </div>
<div class="line"><span class="lineno">  177</span>        bat_per = getBatLevel();</div>
<div class="line"><span class="lineno">  178</span>        current_mA = ina219.read_current() * 1000;</div>
<div class="line"><span class="lineno">  179</span>        displacement = <a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) * 0.5f;</div>
<div class="line"><span class="lineno">  180</span>        force = compute_force(FX29_read(MY_I2C, FX29_ADDR));</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">if</span> (MAF_counter == <a class="code hl_define" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>) {</div>
<div class="line"><span class="lineno">  183</span>            MAF_counter = 0;</div>
<div class="line"><span class="lineno">  184</span>        }</div>
<div class="line"><span class="lineno">  185</span>        <span class="comment">// Remove oldest value and add newest value to sum</span></div>
<div class="line"><span class="lineno">  186</span>        MAF_sum -= MAF[MAF_counter];</div>
<div class="line"><span class="lineno">  187</span>        MAF_sum += current_mA;</div>
<div class="line"><span class="lineno">  188</span>        MAF[MAF_counter] = current_mA;</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>        MAF_counter++;</div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordtype">float</span> MAF_current = MAF_sum * 1.0f/<a class="code hl_define" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>;</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">switch</span>(state) {</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">case</span> WAIT: {</div>
<div class="line"><span class="lineno">  195</span>                enableMSC();</div>
<div class="line"><span class="lineno">  196</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  197</span>                nextState = STANDBY;</div>
<div class="line"><span class="lineno">  198</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  199</span>            }</div>
<div class="line"><span class="lineno">  200</span>            <span class="keywordflow">case</span> STANDBY: {</div>
<div class="line"><span class="lineno">  201</span>                disableMSC();</div>
<div class="line"><span class="lineno">  202</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  203</span>                </div>
<div class="line"><span class="lineno">  204</span>                temp_speed = getInputSpeed();</div>
<div class="line"><span class="lineno">  205</span>                speed_lvl = uint16_t(temp_speed / 100.0f * 255.0f); </div>
<div class="line"><span class="lineno">  206</span>                </div>
<div class="line"><span class="lineno">  207</span>                resetFiltering();</div>
<div class="line"><span class="lineno">  208</span>                displayState();</div>
<div class="line"><span class="lineno">  209</span>                nextState = CUTTING;</div>
<div class="line"><span class="lineno">  210</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  211</span>            }</div>
<div class="line"><span class="lineno">  212</span>            <span class="keywordflow">case</span> CUTTING: {</div>
<div class="line"><span class="lineno">  213</span>                speed_lvl = speed_lvl;</div>
<div class="line"><span class="lineno">  214</span>                lp_current = <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a> * current_mA + (1 - <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>) * lp_current;</div>
<div class="line"><span class="lineno">  215</span>                f_printf(&amp;fil, <span class="stringliteral">&quot;%s,%lld,%f,%f,%f,%f,%f,%f\n&quot;</span>, <span class="stringliteral">&quot;CUTTING&quot;</span>, time_ms, current_mA, lp_current, MAF_current, rpm, displacement, force);</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>                <span class="comment">// ==== SAFETY CHECK ==== //</span></div>
<div class="line"><span class="lineno">  218</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) &gt; <a class="code hl_variable" href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a>) {</div>
<div class="line"><span class="lineno">  219</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  220</span>                    state = REMOVAL;</div>
<div class="line"><span class="lineno">  221</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  222</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, speed_lvl);</div>
<div class="line"><span class="lineno">  223</span>                }</div>
<div class="line"><span class="lineno">  224</span>                </div>
<div class="line"><span class="lineno">  225</span>                displayState();</div>
<div class="line"><span class="lineno">  226</span>                nextState = REMOVAL;</div>
<div class="line"><span class="lineno">  227</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  228</span>            }</div>
<div class="line"><span class="lineno">  229</span>            <span class="keywordflow">case</span> REMOVAL: {</div>
<div class="line"><span class="lineno">  230</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, 0);</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>                temp_speed = getInputSpeed();</div>
<div class="line"><span class="lineno">  233</span>                speed_lvl = int(temp_speed / 100.0f * 255.0f);</div>
<div class="line"><span class="lineno">  234</span>                resetFiltering();</div>
<div class="line"><span class="lineno">  235</span>                </div>
<div class="line"><span class="lineno">  236</span>                displayState();</div>
<div class="line"><span class="lineno">  237</span>                nextState = EXITING;</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  239</span>            }</div>
<div class="line"><span class="lineno">  240</span>            <span class="keywordflow">case</span> EXITING: {</div>
<div class="line"><span class="lineno">  241</span>                speed_lvl = speed_lvl;</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>                lp_current = <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a> * current_mA + (1 - <a class="code hl_define" href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a>) * lp_current;</div>
<div class="line"><span class="lineno">  244</span>                f_printf(&amp;fil, <span class="stringliteral">&quot;%s,%lld,%f,%f,%f,%f,%f,%f\n&quot;</span>, <span class="stringliteral">&quot;EXITING&quot;</span>, time_ms, current_mA, lp_current, MAF_current, rpm, displacement, force);</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>                <span class="comment">// ==== SAFETY CHECK ==== //</span></div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a>(count) &lt; <a class="code hl_variable" href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a>) {</div>
<div class="line"><span class="lineno">  248</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  249</span>                    state = FINISH;</div>
<div class="line"><span class="lineno">  250</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  251</span>                    <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, speed_lvl);</div>
<div class="line"><span class="lineno">  252</span>                }</div>
<div class="line"><span class="lineno">  253</span>                </div>
<div class="line"><span class="lineno">  254</span>                displayState();</div>
<div class="line"><span class="lineno">  255</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  256</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  257</span>            }</div>
<div class="line"><span class="lineno">  258</span>            <span class="keywordflow">case</span> FINISH: {</div>
<div class="line"><span class="lineno">  259</span>                f_close(&amp;fil);</div>
<div class="line"><span class="lineno">  260</span>                f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>                displayState();</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>                nextState = STANDBY;</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  268</span>            }</div>
<div class="line"><span class="lineno">  269</span>            <span class="keywordflow">case</span> ZERO: {</div>
<div class="line"><span class="lineno">  270</span>                <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#ga3249ae087e43a52e0182917edca0dc12">MOTOR_ON</a>);</div>
<div class="line"><span class="lineno">  271</span>                </div>
<div class="line"><span class="lineno">  272</span>                <span class="keywordflow">if</span> (current_mA &gt; <a class="code hl_define" href="config_8h.html#a1923668201fdaeaced6d7935492b1a1f">CUTOFF_STALL</a>) {</div>
<div class="line"><span class="lineno">  273</span>                    count = 0;</div>
<div class="line"><span class="lineno">  274</span>                    state = FINISH;</div>
<div class="line"><span class="lineno">  275</span>                }</div>
<div class="line"><span class="lineno">  276</span>                </div>
<div class="line"><span class="lineno">  277</span>                displayState();</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>                nextState = FINISH;</div>
<div class="line"><span class="lineno">  280</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  281</span>            }</div>
<div class="line"><span class="lineno">  282</span>        }</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  285</span>}</div>
<div class="ttc" id="aconfig_8h_html_a1923668201fdaeaced6d7935492b1a1f"><div class="ttname"><a href="config_8h.html#a1923668201fdaeaced6d7935492b1a1f">CUTOFF_STALL</a></div><div class="ttdeci">#define CUTOFF_STALL</div><div class="ttdoc">Stall current that determines when the ZERO state is complete. If the device detects this current,...</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00028">config.h:28</a></div></div>
<div class="ttc" id="agroup__MotorMacros_html_ga3249ae087e43a52e0182917edca0dc12"><div class="ttname"><a href="group__MotorMacros.html#ga3249ae087e43a52e0182917edca0dc12">MOTOR_ON</a></div><div class="ttdeci">#define MOTOR_ON</div><div class="ttdoc">Maximum PWM value for motor.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00041">config.h:41</a></div></div>
<div class="ttc" id="agroup__MotorMacros_html_gad1b1c6c44e1e025f7a748396b2e6f9f4"><div class="ttname"><a href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a></div><div class="ttdeci">#define MOTOR_OFF</div><div class="ttdoc">Minimum PWM value for motor.</div><div class="ttdef"><b>Definition</b> <a href="config_8h_source.html#l00042">config.h:42</a></div></div>
<div class="ttc" id="amain_8cpp_html_a5988591b58aabf7567019b975da7e7aa"><div class="ttname"><a href="main_8cpp.html#a5988591b58aabf7567019b975da7e7aa">bwRev</a></div><div class="ttdeci">int bwRev</div><div class="ttdoc">Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions :...</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00023">main.cpp:23</a></div></div>
<div class="ttc" id="amain_8cpp_html_a6af9f0d27369b3f4a063f61c51c198f3"><div class="ttname"><a href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a></div><div class="ttdeci">#define MAF_SZ</div><div class="ttdoc">Window size for Moving Average Filter.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00024">main.cpp:24</a></div></div>
<div class="ttc" id="amain_8cpp_html_a92c826e08ae550b58a56ea3f55c49311"><div class="ttname"><a href="main_8cpp.html#a92c826e08ae550b58a56ea3f55c49311">fwRev</a></div><div class="ttdeci">int fwRev</div><div class="ttdoc">Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : d...</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00022">main.cpp:22</a></div></div>
<div class="ttc" id="amain_8cpp_html_a9400840ebc875d8e59c484e65a643b77"><div class="ttname"><a href="main_8cpp.html#a9400840ebc875d8e59c484e65a643b77">LP_ALPHA</a></div><div class="ttdeci">#define LP_ALPHA</div><div class="ttdoc">Smoothing factor for LP Filter.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00025">main.cpp:25</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a1a668d0f88bcacc451fca6bf25511b62"><div class="ttname"><a href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a></div><div class="ttdeci">void setMotor(bool direction, uint16_t power)</div><div class="ttdoc">Turns on motor with configureable speed and direction values.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00067">ntm_helpers.cpp:67</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a8b0e682ac7928c7d2592cb80a81a2874"><div class="ttname"><a href="ntm__helpers_8h.html#a8b0e682ac7928c7d2592cb80a81a2874">getRevolutions</a></div><div class="ttdeci">float getRevolutions(int count)</div><div class="ttdoc">Takes detected motor signals and converts them to the real-world number of revolutions of the motor s...</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00078">ntm_helpers.cpp:78</a></div></div>
<div class="ttc" id="antm__helpers_8h_html_a8c6d7458362f0a1d72f048e5c28dafc9"><div class="ttname"><a href="ntm__helpers_8h.html#a8c6d7458362f0a1d72f048e5c28dafc9">board_gpio_init</a></div><div class="ttdeci">void board_gpio_init()</div><div class="ttdoc">Initiates all GPIO pins as well as communication protocols.</div><div class="ttdef"><b>Definition</b> <a href="ntm__helpers_8cpp_source.html#l00026">ntm_helpers.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c50659733df2acac1580d209db8e97f" name="a8c50659733df2acac1580d209db8e97f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c50659733df2acac1580d209db8e97f">&#9670;&#160;</a></span>oled_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oled_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00289">289</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span>                 {</div>
<div class="line"><span class="lineno">  290</span>    <span class="comment">// External_vcc must be false for this to work</span></div>
<div class="line"><span class="lineno">  291</span>    oled.external_vcc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordtype">bool</span> oled_status = ssd1306_init(</div>
<div class="line"><span class="lineno">  293</span>        &amp;oled,</div>
<div class="line"><span class="lineno">  294</span>        128,</div>
<div class="line"><span class="lineno">  295</span>        64,</div>
<div class="line"><span class="lineno">  296</span>        OLED_ADDR,</div>
<div class="line"><span class="lineno">  297</span>        MY_I2C</div>
<div class="line"><span class="lineno">  298</span>    );</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">if</span> (oled_status) {</div>
<div class="line"><span class="lineno">  301</span>        ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  302</span>        ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;RECORDS&quot;</span>);</div>
<div class="line"><span class="lineno">  303</span>        ssd1306_draw_string(&amp;oled, 0, 20, 1, <span class="stringliteral">&quot;[ PRESS STA  :  NEW ]&quot;</span>);</div>
<div class="line"><span class="lineno">  304</span>        ssd1306_draw_string(&amp;oled, 0, 30, 1, <span class="stringliteral">&quot;[ HOLD  STA  : ZERO ]&quot;</span>);</div>
<div class="line"><span class="lineno">  305</span>        ssd1306_draw_string(&amp;oled, 0, 45, 1, <span class="stringliteral">&quot;V1.0 - 5/6/25&quot;</span>);</div>
<div class="line"><span class="lineno">  306</span>        ssd1306_draw_string(&amp;oled, 0, 55, 1, <span class="stringliteral">&quot;Author: Thomas Chang&quot;</span>);</div>
<div class="line"><span class="lineno">  307</span>        displayBat(0);</div>
<div class="line"><span class="lineno">  308</span>        ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  309</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  310</span>        printf(<span class="stringliteral">&quot;OLED initialization failed.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af7e37f59651692a7089d2b8ed312c7d3" name="af7e37f59651692a7089d2b8ed312c7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e37f59651692a7089d2b8ed312c7d3">&#9670;&#160;</a></span>resetFiltering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetFiltering </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00489">489</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  489</span>                      {</div>
<div class="line"><span class="lineno">  490</span>    <span class="comment">// Initialize all moving average filter values to zero.</span></div>
<div class="line"><span class="lineno">  491</span>    MAF_counter = 0;</div>
<div class="line"><span class="lineno">  492</span>    MAF_sum = 0;</div>
<div class="line"><span class="lineno">  493</span>    memset(MAF, 0, <span class="keyword">sizeof</span>(MAF));</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    <span class="comment">// Reset previous low pass output.</span></div>
<div class="line"><span class="lineno">  496</span>    lp_current = 0;</div>
<div class="line"><span class="lineno">  497</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a64461563174d034ff94d443f2c172622" name="a64461563174d034ff94d443f2c172622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64461563174d034ff94d443f2c172622">&#9670;&#160;</a></span>testingSuite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testingSuite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00510">510</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  510</span>                    {</div>
<div class="line"><span class="lineno">  511</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  512</span>    sleep_ms(1000);</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>    gpio_init(26);</div>
<div class="line"><span class="lineno">  515</span>    gpio_set_dir(26, GPIO_OUT);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="comment">// I2C</span></div>
<div class="line"><span class="lineno">  518</span>    i2c_init(i2c0, 400000);</div>
<div class="line"><span class="lineno">  519</span>    gpio_set_function(I2C_SDA, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  520</span>    gpio_set_function(I2C_SCL, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  521</span>    gpio_pull_up(I2C_SDA);</div>
<div class="line"><span class="lineno">  522</span>    gpio_pull_up(I2C_SCL);</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="comment">// OLED</span></div>
<div class="line"><span class="lineno">  525</span>    oled_init();</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>    <span class="comment">// BUTTMOTOR_ONS</span></div>
<div class="line"><span class="lineno">  528</span>    gpio_init(state_input);</div>
<div class="line"><span class="lineno">  529</span>    gpio_set_dir(state_input, GPIO_IN);</div>
<div class="line"><span class="lineno">  530</span>    gpio_pull_down(state_input);</div>
<div class="line"><span class="lineno">  531</span>    gpio_init(msc_input);</div>
<div class="line"><span class="lineno">  532</span>    gpio_set_dir(msc_input, GPIO_IN);</div>
<div class="line"><span class="lineno">  533</span>    gpio_pull_down(msc_input);</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <span class="comment">// POTENTIOMETER</span></div>
<div class="line"><span class="lineno">  536</span>    adc_init();</div>
<div class="line"><span class="lineno">  537</span>    adc_gpio_init(speed_input);</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>    <span class="comment">// Motor Control</span></div>
<div class="line"><span class="lineno">  540</span>    uint <a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a> = pwm_gpio_to_slice_num(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  541</span>    uint <a class="code hl_variable" href="main_8cpp.html#a23777d4d3d69af11916d27e48261cfb1">channel</a> = pwm_gpio_to_channel(MOTOR_PWM);</div>
<div class="line"><span class="lineno">  542</span>    gpio_set_function(MOTOR_PWM, GPIO_FUNC_PWM);</div>
<div class="line"><span class="lineno">  543</span>    pwm_set_clkdiv(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, 48.83f);</div>
<div class="line"><span class="lineno">  544</span>    pwm_set_wrap(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, 255);</div>
<div class="line"><span class="lineno">  545</span>    pwm_set_chan_level(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, PWM_CHAN_A, 0);</div>
<div class="line"><span class="lineno">  546</span>    pwm_set_enabled(<a class="code hl_variable" href="main_8cpp.html#ac7597a58fd0a9415759b81dffee974e6">slice</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  547</span>    gpio_init(MOTOR_DIR);</div>
<div class="line"><span class="lineno">  548</span>    gpio_set_dir(MOTOR_DIR, GPIO_OUT);</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  551</span>        <span class="comment">// Testing functionality of pushbuttons.</span></div>
<div class="line"><span class="lineno">  552</span>        <span class="keywordflow">while</span> (gpio_get(msc_input) == 1 || gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  553</span>            gpio_put(26, 1);</div>
<div class="line"><span class="lineno">  554</span>        }</div>
<div class="line"><span class="lineno">  555</span>        </div>
<div class="line"><span class="lineno">  556</span>        <span class="comment">// Testing potentiometer.</span></div>
<div class="line"><span class="lineno">  557</span>        <span class="keywordtype">long</span> test_pot = getInputSpeed() * 10;</div>
<div class="line"><span class="lineno">  558</span>        gpio_put(26, 1);</div>
<div class="line"><span class="lineno">  559</span>        sleep_ms(test_pot);</div>
<div class="line"><span class="lineno">  560</span>        gpio_put(26, 0);</div>
<div class="line"><span class="lineno">  561</span>        sleep_ms(test_pot);</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>        <span class="comment">// Testing functionality of motor.</span></div>
<div class="line"><span class="lineno">  564</span>        <span class="keywordflow">if</span> (gpio_get(state_input) == 1) {</div>
<div class="line"><span class="lineno">  565</span>            <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_FW, 255);</div>
<div class="line"><span class="lineno">  566</span>            sleep_ms(3000);</div>
<div class="line"><span class="lineno">  567</span>            <a class="code hl_function" href="ntm__helpers_8h.html#a1a668d0f88bcacc451fca6bf25511b62">setMotor</a>(MOTOR_BW, <a class="code hl_define" href="group__MotorMacros.html#gad1b1c6c44e1e025f7a748396b2e6f9f4">MOTOR_OFF</a>);</div>
<div class="line"><span class="lineno">  568</span>        }</div>
<div class="line"><span class="lineno">  569</span>        </div>
<div class="line"><span class="lineno">  570</span>    }</div>
<div class="line"><span class="lineno">  571</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4765141d8281f1873714923a260f93fc" name="a4765141d8281f1873714923a260f93fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4765141d8281f1873714923a260f93fc">&#9670;&#160;</a></span>testMSC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testMSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00572">572</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  572</span>               {</div>
<div class="line"><span class="lineno">  573</span>    board_init();</div>
<div class="line"><span class="lineno">  574</span>    printf(<span class="stringliteral">&quot;\033[2J\033[H&quot;</span>);</div>
<div class="line"><span class="lineno">  575</span>    tud_init(BOARD_TUD_RHPORT);</div>
<div class="line"><span class="lineno">  576</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span>    <span class="comment">// I2C</span></div>
<div class="line"><span class="lineno">  579</span>    i2c_init(i2c0, 400000);</div>
<div class="line"><span class="lineno">  580</span>    gpio_set_function(I2C_SDA, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  581</span>    gpio_set_function(I2C_SCL, GPIO_FUNC_I2C);</div>
<div class="line"><span class="lineno">  582</span>    gpio_pull_up(I2C_SDA);</div>
<div class="line"><span class="lineno">  583</span>    gpio_pull_up(I2C_SCL);</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>    uint32_t sys_freq = clock_get_hz(clk_sys);</div>
<div class="line"><span class="lineno">  586</span>    std::string temp = to_string(sys_freq);</div>
<div class="line"><span class="lineno">  587</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* sys_freq_str = temp.c_str();</div>
<div class="line"><span class="lineno">  588</span>    oled.external_vcc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordtype">bool</span> oled_status = ssd1306_init(&amp;oled, 128, 64, OLED_ADDR, MY_I2C);</div>
<div class="line"><span class="lineno">  590</span>    </div>
<div class="line"><span class="lineno">  591</span>    <span class="keywordflow">if</span> (oled_status) {</div>
<div class="line"><span class="lineno">  592</span>        ssd1306_clear(&amp;oled);</div>
<div class="line"><span class="lineno">  593</span>        ssd1306_draw_string(&amp;oled, 0, 2, 2, <span class="stringliteral">&quot;Sys Clock:&quot;</span>);</div>
<div class="line"><span class="lineno">  594</span>        ssd1306_draw_string(&amp;oled, 0, 20, 1 , sys_freq_str);</div>
<div class="line"><span class="lineno">  595</span>        ssd1306_show(&amp;oled);</div>
<div class="line"><span class="lineno">  596</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  597</span>        printf(<span class="stringliteral">&quot;OLED initialization failed.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  598</span>    }</div>
<div class="line"><span class="lineno">  599</span>    </div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  602</span>        tud_task();</div>
<div class="line"><span class="lineno">  603</span>    }</div>
<div class="line"><span class="lineno">  604</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ada5a15c76153823533f203632f7d1d62" name="ada5a15c76153823533f203632f7d1d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada5a15c76153823533f203632f7d1d62">&#9670;&#160;</a></span>testSD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testSD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00605">605</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  605</span>              {</div>
<div class="line"><span class="lineno">  606</span>    stdio_init_all();</div>
<div class="line"><span class="lineno">  607</span>    tusb_init();</div>
<div class="line"><span class="lineno">  608</span>    sleep_ms(5000);</div>
<div class="line"><span class="lineno">  609</span>    printf(<span class="stringliteral">&quot;Testing if seral works.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>    FATFS fs;</div>
<div class="line"><span class="lineno">  612</span>    FRESULT fr = f_mount(&amp;fs, <span class="stringliteral">&quot;&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> (FR_OK != fr) {</div>
<div class="line"><span class="lineno">  614</span>        panic(<span class="stringliteral">&quot;f_mount error: %s (%d)\n&quot;</span>, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  615</span>    }</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>    <span class="comment">// Open a file and write to it</span></div>
<div class="line"><span class="lineno">  618</span>    FIL fil;</div>
<div class="line"><span class="lineno">  619</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> filename = <span class="stringliteral">&quot;filename.txt&quot;</span>;</div>
<div class="line"><span class="lineno">  620</span>    fr = f_open(&amp;fil, filename, FA_OPEN_APPEND | FA_WRITE);</div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">if</span> (FR_OK != fr &amp;&amp; FR_EXIST != fr) {</div>
<div class="line"><span class="lineno">  622</span>        panic(<span class="stringliteral">&quot;f_open(%s) error: %s (%d)\n&quot;</span>, filename, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  623</span>    }</div>
<div class="line"><span class="lineno">  624</span>    <span class="keywordflow">if</span> (f_printf(&amp;fil, <span class="stringliteral">&quot;Hello, world!\n&quot;</span>) &lt; 0) {</div>
<div class="line"><span class="lineno">  625</span>        printf(<span class="stringliteral">&quot;f_printf failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  626</span>    }</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>    <span class="comment">// Close the file</span></div>
<div class="line"><span class="lineno">  629</span>    fr = f_close(&amp;fil);</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">if</span> (FR_OK != fr) {</div>
<div class="line"><span class="lineno">  631</span>        printf(<span class="stringliteral">&quot;f_close error: %s (%d)\n&quot;</span>, FRESULT_str(fr), fr);</div>
<div class="line"><span class="lineno">  632</span>    }</div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>    <span class="comment">// Unmount the SD card</span></div>
<div class="line"><span class="lineno">  635</span>    f_unmount(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><span class="lineno">  638</span>        printf(<span class="stringliteral">&quot;Testing serial.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  639</span>        sleep_ms(1000);</div>
<div class="line"><span class="lineno">  640</span>    }</div>
<div class="line"><span class="lineno">  641</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3e2ce6f76284e4e63fab85506c67907b" name="a3e2ce6f76284e4e63fab85506c67907b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2ce6f76284e4e63fab85506c67907b">&#9670;&#160;</a></span>bat_per</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long bat_per = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00057">57</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a268172ec6be901b1e9c5f4212cee806b" name="a268172ec6be901b1e9c5f4212cee806b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a268172ec6be901b1e9c5f4212cee806b">&#9670;&#160;</a></span>button_msc_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_msc_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00090">90</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ae964ac24618b7c245998d37cdd06acd3" name="ae964ac24618b7c245998d37cdd06acd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae964ac24618b7c245998d37cdd06acd3">&#9670;&#160;</a></span>button_press_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_press_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00088">88</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a548278ea37054952a50f6ef9ce6413ce" name="a548278ea37054952a50f6ef9ce6413ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a548278ea37054952a50f6ef9ce6413ce">&#9670;&#160;</a></span>button_release_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool button_release_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00089">89</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a5988591b58aabf7567019b975da7e7aa" name="a5988591b58aabf7567019b975da7e7aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5988591b58aabf7567019b975da7e7aa">&#9670;&#160;</a></span>bwRev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bwRev = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max backwards revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1) </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00023">23</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a23777d4d3d69af11916d27e48261cfb1" name="a23777d4d3d69af11916d27e48261cfb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23777d4d3d69af11916d27e48261cfb1">&#9670;&#160;</a></span>channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint channel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global channel value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to PWM output pin itself. Please see RP2040 documentation. </p>

<p class="definition">Definition at line <a class="el" href="ntm__helpers_8cpp_source.html#l00024">24</a> of file <a class="el" href="ntm__helpers_8cpp_source.html">ntm_helpers.cpp</a>.</p>

</div>
</div>
<a id="ad43c3812e6d13e0518d9f8b8f463ffcf" name="ad43c3812e6d13e0518d9f8b8f463ffcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43c3812e6d13e0518d9f8b8f463ffcf">&#9670;&#160;</a></span>count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00058">58</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a21215ef0aca60874669e1e2f7425e70c" name="a21215ef0aca60874669e1e2f7425e70c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21215ef0aca60874669e1e2f7425e70c">&#9670;&#160;</a></span>currBug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t currBug = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00082">82</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aa7d2f7d0c2e8d8f3a6428b8225202ea3" name="aa7d2f7d0c2e8d8f3a6428b8225202ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d2f7d0c2e8d8f3a6428b8225202ea3">&#9670;&#160;</a></span>current_mA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float current_mA = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00066">66</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a23d4a56445e448ecc3a9c7143fe0c832" name="a23d4a56445e448ecc3a9c7143fe0c832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d4a56445e448ecc3a9c7143fe0c832">&#9670;&#160;</a></span>displacement</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float displacement = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00068">68</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a4be63952e3c9cb0f46f9e592b3c78714" name="a4be63952e3c9cb0f46f9e592b3c78714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be63952e3c9cb0f46f9e592b3c78714">&#9670;&#160;</a></span>fil</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FIL fil</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00096">96</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ab1e3ee7820c8f54b680f492ef5c0d1ed" name="ab1e3ee7820c8f54b680f492ef5c0d1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e3ee7820c8f54b680f492ef5c0d1ed">&#9670;&#160;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCHAR filename[20] = &quot;data0.csv\0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00097">97</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5af4859884ea5c925366abfbdb0ef8f" name="ad5af4859884ea5c925366abfbdb0ef8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5af4859884ea5c925366abfbdb0ef8f">&#9670;&#160;</a></span>filesys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FATFS filesys</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00095">95</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad0952eff2667e5af2b307ba4f6d0b06b" name="ad0952eff2667e5af2b307ba4f6d0b06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0952eff2667e5af2b307ba4f6d0b06b">&#9670;&#160;</a></span>force</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float force = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00067">67</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a92c826e08ae550b58a56ea3f55c49311" name="a92c826e08ae550b58a56ea3f55c49311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92c826e08ae550b58a56ea3f55c49311">&#9670;&#160;</a></span>fwRev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fwRev = 50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max forward revolutions of the device from start position. Current ratio of (revolutions : distance) = (2 : 1) </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00022">22</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5f7a9c2f3b2608343ddf46bcfcac2c2" name="ad5f7a9c2f3b2608343ddf46bcfcac2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f7a9c2f3b2608343ddf46bcfcac2c2">&#9670;&#160;</a></span>lp_current</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float lp_current = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00070">70</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a37794ae42b6a8116fa24f997b634dba9" name="a37794ae42b6a8116fa24f997b634dba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37794ae42b6a8116fa24f997b634dba9">&#9670;&#160;</a></span>MAF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MAF[<a class="el" href="main_8cpp.html#a6af9f0d27369b3f4a063f61c51c198f3">MAF_SZ</a>] = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00071">71</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{0};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a891ae364a9c7853fd67cdb10cfc870c8" name="a891ae364a9c7853fd67cdb10cfc870c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a891ae364a9c7853fd67cdb10cfc870c8">&#9670;&#160;</a></span>MAF_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MAF_counter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00072">72</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aef72076a36ad8bc9405e594d784e040b" name="aef72076a36ad8bc9405e594d784e040b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef72076a36ad8bc9405e594d784e040b">&#9670;&#160;</a></span>MAF_sum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MAF_sum = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00073">73</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a0d24a7e8ef01eb2683901eb25396beed" name="a0d24a7e8ef01eb2683901eb25396beed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d24a7e8ef01eb2683901eb25396beed">&#9670;&#160;</a></span>motor_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool motor_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00087">87</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a6564e8259eebddb283f25451cd7fd364" name="a6564e8259eebddb283f25451cd7fd364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6564e8259eebddb283f25451cd7fd364">&#9670;&#160;</a></span>mscPressTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t mscPressTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00064">64</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a434ef2e67e7d14c2f6a753c08a5eae49" name="a434ef2e67e7d14c2f6a753c08a5eae49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434ef2e67e7d14c2f6a753c08a5eae49">&#9670;&#160;</a></span>nextState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum states state nextState</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00109">109</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ae1f37897ed52586bce688beb5be8f50e" name="ae1f37897ed52586bce688beb5be8f50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f37897ed52586bce688beb5be8f50e">&#9670;&#160;</a></span>now</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t now = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00060">60</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac6f130727d2275823bd3040581e801a5" name="ac6f130727d2275823bd3040581e801a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6f130727d2275823bd3040581e801a5">&#9670;&#160;</a></span>numPulses</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numPulses = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00059">59</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a03de839a9debec4f2265023b765444ad" name="a03de839a9debec4f2265023b765444ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03de839a9debec4f2265023b765444ad">&#9670;&#160;</a></span>oled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssd1306_t oled</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00054">54</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a029fea14c173ec8d34f33c8594b95db0" name="a029fea14c173ec8d34f33c8594b95db0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029fea14c173ec8d34f33c8594b95db0">&#9670;&#160;</a></span>pressedTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t pressedTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00063">63</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ad5a5c46842ef8862d2ccd9e7bd3aec63" name="ad5a5c46842ef8862d2ccd9e7bd3aec63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a5c46842ef8862d2ccd9e7bd3aec63">&#9670;&#160;</a></span>pressTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t pressTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00062">62</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac0799c2e54cccc1be7e9b4a1a9fa780c" name="ac0799c2e54cccc1be7e9b4a1a9fa780c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0799c2e54cccc1be7e9b4a1a9fa780c">&#9670;&#160;</a></span>prevBug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t prevBug = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00081">81</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a597777ddfcfc40b6553d91789dfd343f" name="a597777ddfcfc40b6553d91789dfd343f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a597777ddfcfc40b6553d91789dfd343f">&#9670;&#160;</a></span>prevTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absolute_time_t prevTime = get_absolute_time()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00061">61</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a25e39b399c2a11f0d76e42ab8241a910" name="a25e39b399c2a11f0d76e42ab8241a910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e39b399c2a11f0d76e42ab8241a910">&#9670;&#160;</a></span>rpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float rpm = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00065">65</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="ac7597a58fd0a9415759b81dffee974e6" name="ac7597a58fd0a9415759b81dffee974e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7597a58fd0a9415759b81dffee974e6">&#9670;&#160;</a></span>slice</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint slice</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global slice value for the PWM module. Automatically determined by chosen pin at runtime. Corresponds to the organization of PWM configurations by clock. Please see RP2040 documentation. </p>

<p class="definition">Definition at line <a class="el" href="ntm__helpers_8cpp_source.html#l00018">18</a> of file <a class="el" href="ntm__helpers_8cpp_source.html">ntm_helpers.cpp</a>.</p>

</div>
</div>
<a id="a1fef9435f436bfd601806a7a0bef54bb" name="a1fef9435f436bfd601806a7a0bef54bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fef9435f436bfd601806a7a0bef54bb">&#9670;&#160;</a></span>speed_lvl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t speed_lvl = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00055">55</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="af04968100075345ffc60b9ffe62b4c9c" name="af04968100075345ffc60b9ffe62b4c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04968100075345ffc60b9ffe62b4c9c">&#9670;&#160;</a></span>temp_speed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long temp_speed = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00056">56</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="accd9653a1b3ee09644723877d2aa36e1" name="accd9653a1b3ee09644723877d2aa36e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accd9653a1b3ee09644723877d2aa36e1">&#9670;&#160;</a></span>validPress</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool validPress = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00435">435</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
